# A0144422R
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
    @Test
    public void execute_add_event_successful() throws Exception {
        // setup expectations
        TestDataHelper helper = new TestDataHelper();
        Task toBeAdded = helper.generateEventTaskWithNameTags("name", 0, 1, "tag1");
        TaskManager expectedAB = new TaskManager();
        expectedAB.addTask(toBeAdded);

        // execute command and verify result
        assertCommandSuccess("add name from today 0000 to tomorrow 0000 #tag1",
                String.format(AddCommand.MESSAGE_SUCCESS, toBeAdded), expectedAB, expectedAB.getTaskList());

    }

```
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
    @Test
    public void execute_add_deadline_task_successful() throws Exception {
        // setup expectations
        TestDataHelper helper = new TestDataHelper();
        Task toBeAdded = helper.generateDeadlineTaskWithNameTags("name", 0, "tag1");
        TaskManager expectedAB = new TaskManager();
        expectedAB.addTask(toBeAdded);

        // execute command and verify result
        assertCommandSuccess("add name due today 0000 #tag1", String.format(AddCommand.MESSAGE_SUCCESS, toBeAdded),
                expectedAB, expectedAB.getTaskList());
    }

    @Test
    public void execute_addDuplicate_notAllowed() throws Exception {
        // setup expectations
        TestDataHelper helper = new TestDataHelper();
        Task toBeAdded = helper.adam();

        // setup starting state
        model.addTask(toBeAdded); // task already in internal task manager

        // execute command and verify result
        assertCommandFailure(helper.generateAddCommand(toBeAdded), AddCommand.MESSAGE_DUPLICATE_PERSON);

    }

    @Test
    public void execute_list_showsAllTasks() throws Exception {
        // prepare expectations
        TestDataHelper helper = new TestDataHelper();
        TaskManager expectedAB = helper.generateTaskManager(2);
        List<? extends ReadOnlyTask> expectedList = expectedAB.getTaskList();

        // prepare task manager state
        helper.addToModel(model, 2);

        assertCommandSuccess("list", ListCommand.MESSAGE_SUCCESS, expectedAB, expectedList);
    }

    /**
     * Confirms the 'invalid argument index number behaviour' for the given
     * command targeting a single task in the shown list, using visible index.
     *
     * @param commandWord
     *            to test assuming it targets a single task in the last shown
     *            list based on visible index.
     */
    private void assertIndexNotFoundBehaviorForCommand(String commandWord) throws Exception {
        String expectedMessage = Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX;
        TestDataHelper helper = new TestDataHelper();
        List<Task> taskList = helper.generateTaskList(2);

        // set AB state to 2 tasks
        model.setData(new TaskManager(), true);
        for (Task p : taskList) {
            model.addTask(p);
        }

        assertCommandFailure(commandWord + " F100", expectedMessage);
    }

    @Test
    public void execute_deleteIndexNotFound_errorMessageShown() throws Exception {
        assertIndexNotFoundBehaviorForCommand("delete");
    }

    @Test
    public void execute_delete_removesCorrectTask() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        List<Task> threeTasks = helper.generateTaskList(3);

        TaskManager expectedAB = helper.generateTaskManager(threeTasks);
        expectedAB.removeTask(threeTasks.get(1));
        helper.addToModel(model, threeTasks);
        model.prepareTaskList(FXCollections.observableArrayList(), FXCollections.observableArrayList(),
                FXCollections.observableArrayList());
        assertCommandSuccess("delete C1", String.format(DeleteCommand.MESSAGE_DELETE_TASK_SUCCESS, threeTasks.get(1)),
                expectedAB, expectedAB.getTaskList());
    }

```
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
    @Test
    public void execute_editNameAndTag_successful() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        List<Task> threeTasks = helper.generateTaskList(3);
        TaskManager expectedAB = helper.generateTaskManager(threeTasks);
        Task taskToEdit = threeTasks.get(1);
        Task backup = new FloatingTask(taskToEdit);
        taskToEdit = new FloatingTask(new Name("new name"), new UniqueTagList("tag1", "tag2"), false, false);
        expectedAB.updateTask(1, taskToEdit);
        helper.addToModel(model, threeTasks);
        model.prepareTaskList(FXCollections.observableArrayList(), FXCollections.observableArrayList(),
                FXCollections.observableArrayList());
        assertCommandSuccess("edit C1 new name #tag1 #tag2",
                String.format(EditCommand.MESSAGE_EDIT_TASK_SUCCESS, backup), expectedAB, expectedAB.getTaskList());
    }

```
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
    @Test
    public void execute_editEventNameAndTag_successful() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        List<Task> threeTasks = helper.generateTaskList(3);
        TaskManager expectedAB = helper.generateTaskManager(threeTasks);
        Task taskToEdit = threeTasks.get(1);
        Date start = DateUtils.truncate(DateUtils.addDays(new Date(), 0), Calendar.DAY_OF_MONTH);
        Date end = DateUtils.truncate(DateUtils.addDays(new Date(), 1), Calendar.DAY_OF_MONTH);
        Task backup = new FloatingTask(taskToEdit);
        taskToEdit = new EventTask(new Name("new name"), new UniqueTagList("tag1", "tag2"), end, start, false, false);
        expectedAB.updateTask(1, taskToEdit);
        helper.addToModel(model, threeTasks);
        model.prepareTaskList(FXCollections.observableArrayList(), FXCollections.observableArrayList(),
                FXCollections.observableArrayList());
        assertCommandSuccess("edit C1 new name from today at 0000 to tomorrow at 0000 #tag1 #tag2",
                String.format(EditCommand.MESSAGE_EDIT_TASK_SUCCESS, backup), expectedAB, expectedAB.getTaskList());
    }

```
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
    @Test
    public void execute_editDeadlineTaskTag_successful() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        List<Task> threeTasks = helper.generateTaskList(3);
        TaskManager expectedAB = helper.generateTaskManager(threeTasks);
        Task taskToEdit = threeTasks.get(1);
        Task backup = new FloatingTask(taskToEdit);
        Date end = DateUtils.truncate(DateUtils.addDays(new Date(), 1), Calendar.DAY_OF_MONTH);
        taskToEdit = new DeadlineTask(taskToEdit.getName(), new UniqueTagList("tag1", "tag2"), end, false, false);
        expectedAB.updateTask(1, taskToEdit);
        helper.addToModel(model, threeTasks);
        model.prepareTaskList(FXCollections.observableArrayList(), FXCollections.observableArrayList(),
                FXCollections.observableArrayList());
        assertCommandSuccess("edit C1 due tomorrow at 0000 #tag1 #tag2",
                String.format(EditCommand.MESSAGE_EDIT_TASK_SUCCESS, backup), expectedAB, expectedAB.getTaskList());
    }

```
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
    @Test
    public void execute_editConfusingName_successful() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        List<Task> threeTasks = helper.generateTaskList(3);
        TaskManager expectedAB = helper.generateTaskManager(threeTasks);
        Task taskToEdit = threeTasks.get(1);
        Task backup = new FloatingTask(taskToEdit);
        taskToEdit = new FloatingTask(new Name("from today uihasduhas to tomorrow uhaius"),
                new UniqueTagList("tag1", "tag2"), false, false);
        expectedAB.updateTask(1, taskToEdit);
        helper.addToModel(model, threeTasks);
        model.prepareTaskList(FXCollections.observableArrayList(), FXCollections.observableArrayList(),
                FXCollections.observableArrayList());
        assertCommandSuccess("edit C1 from today uihasduhas to tomorrow uhaius #tag1 #tag2",
                String.format(EditCommand.MESSAGE_EDIT_TASK_SUCCESS, backup), expectedAB, expectedAB.getTaskList());
    }

```
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
    @Test
    public void execute_editDuplicateTask_notAllowed() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        List<Task> threeTasks = helper.generateTaskList(3);
        helper.addToModel(model, threeTasks);
        model.prepareTaskList(FXCollections.observableArrayList(), FXCollections.observableArrayList(),
                FXCollections.observableArrayList());
        assertCommandFailure("edit C1 Task 3 #tag3 #tag4", EditCommand.MESSAGE_DUPLICATE_TASK);
    }

```
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
    @Test
    public void execute_editIndexNotFound_notAllowed() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        List<Task> threeTasks = helper.generateTaskList(3);
        helper.addToModel(model, threeTasks);
        model.prepareTaskList(FXCollections.observableArrayList(), FXCollections.observableArrayList(),
                FXCollections.observableArrayList());
        assertCommandFailure("edit C100 Task 3 #tag3 #tag4", Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);
    }

    // ----------------------Today----------------------

    @Test
    public void execute_today_invalidArgsFormat() {
        String expectedMessage = Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX;
        assertCommandFailure("today ", expectedMessage);
    }

    @Test
    public void execute_todayIndexNotFound_errorMessageShown() throws Exception {
        assertIndexNotFoundBehaviorForCommand("today");
    }

    @Test
    public void execute_today_valid() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        List<Task> threeTasks = helper.generateTaskList(3);
        // TestUtil.assignUiIndex(threeTasks);
        Task taskToToday = threeTasks.get(0);
        Task todayTask = new FloatingTask(taskToToday.getName(), taskToToday.getTags(), taskToToday.isDone(), true);

        TaskManager expectedAB = helper.generateTaskManager(threeTasks);
        expectedAB.updateTask(0, todayTask);

        helper.addToModel(model, threeTasks);
        model.prepareTaskList(FXCollections.observableArrayList(), FXCollections.observableArrayList(),
                FXCollections.observableArrayList());
        assertCommandSuccess("today F1", String.format(TodayCommand.MESSAGE_TODAY_TASK_SUCCESS, todayTask), expectedAB,
                expectedAB.getTaskList());
    }

```
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
    @Test
    public void execute_find_date() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        Task targetDeadline1 = helper.generateDeadlineTaskWithNameTags("bla bla KEY bla", 0, "KEY");
        Task targetDeadline2 = helper.generateEventTaskWithNameTags("bla KEY bla bceofeia", -1, 0, "blahbla", "KEY");
        Task p1 = helper.generateTaskWithNameAndTags("KE Y", "nope");
        Task p2 = helper.generateTaskWithName("KEYKEYKEY sduauo");
        Task p3 = helper.generateTaskWithNameAndTags("KE YY", "KEYY");
        Task p4 = helper.generateDeadlineTaskWithNameTags("KEYKEYKEY sduauo", 2);
        Task p5 = helper.generateEventTaskWithNameTags("KEEEEY", 2, 3);

        List<Task> sevenTasks = helper.generateTaskList(p1, targetDeadline1, p2, targetDeadline2, p4, p5, p3);
        TaskManager expectedAB = helper.generateTaskManager(sevenTasks);
        List<Task> expectedList = helper.generateTaskList(targetDeadline1, targetDeadline2);
        helper.addToModel(model, sevenTasks);

        assertCommandSuccess("find due today", Command.getMessageForTaskListShownSummary(expectedList.size()),
                expectedAB, expectedList);
    }

    @Test
    public void execute_find_isNotCaseSensitive() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        Task p1 = helper.generateTaskWithName("bla bla KEY bla");
        Task p2 = helper.generateTaskWithName("bla KEY bla bceofeia");
        Task p3 = helper.generateTaskWithName("key key");
        Task p4 = helper.generateTaskWithName("KEy sduauo");

        List<Task> fourTasks = helper.generateTaskList(p3, p1, p4, p2);
        TaskManager expectedAB = helper.generateTaskManager(fourTasks);
        List<Task> expectedList = fourTasks;
        helper.addToModel(model, fourTasks);

        assertCommandSuccess("find KEY", Command.getMessageForTaskListShownSummary(expectedList.size()), expectedAB,
                expectedList);
    }

    @Test
    public void execute_find_invalidArgs() throws Exception {
        TestDataHelper helper = new TestDataHelper();
        Task pTarget1 = helper.generateTaskWithName("bla bla KEY bla");
        Task pTarget2 = helper.generateTaskWithName("bla rAnDoM bla bceofeia");
        Task pTarget3 = helper.generateTaskWithName("key key");
        Task p1 = helper.generateTaskWithName("sduauo");

        List<Task> fourTasks = helper.generateTaskList(pTarget1, p1, pTarget2, pTarget3);
        TaskManager expectedAB = helper.generateTaskManager(fourTasks);
        List<Task> expectedList = helper.generateTaskList(pTarget1, pTarget2, pTarget3);
        helper.addToModel(model, fourTasks);

        assertCommandSuccess("find key rAnDoM", Command.getMessageForTaskListShownSummary(expectedList.size()),
                expectedAB, expectedList);
    }

```
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
        Task generateEventTaskWithNameTags(String name, int days1, int days2, String... tagNames) throws Exception {
            ArrayList<Tag> tags = new ArrayList<Tag>();
            for (String tagName : tagNames) {
                tags.add(new Tag(tagName));
            }
            Date start = DateUtils.truncate(DateUtils.addDays(new Date(), days1), Calendar.DAY_OF_MONTH);
            Date end = DateUtils.truncate(DateUtils.addDays(new Date(), days2), Calendar.DAY_OF_MONTH);
            return new EventTask(new Name(name), new UniqueTagList(tags), end, start, false, false);
        }

```
###### \java\seedu\address\logic\LogicManagerTest.java
``` java
        Task generateDeadlineTaskWithNameTags(String name, int days, String... tagNames) throws Exception {
            ArrayList<Tag> tags = new ArrayList<Tag>();
            for (String tagName : tagNames) {
                tags.add(new Tag(tagName));
            }
            Date end = DateUtils.truncate(DateUtils.addDays(new Date(), days), Calendar.DAY_OF_MONTH);
            return new DeadlineTask(new Name(name), new UniqueTagList(tags), end, false, false);
        }
    }
}
```
###### \java\seedu\address\model\task\TaskTest.java
``` java
package seedu.address.model.task;

import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;
import static org.junit.Assert.fail;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

import org.junit.Test;
import org.ocpsoft.prettytime.shade.org.apache.commons.lang.time.DateUtils;

import seedu.address.commons.exceptions.IllegalValueException;
import seedu.address.model.tag.UniqueTagList;

public class TaskTest {
    @Test
    public void floatingTaskTest() throws Exception {
        try {
            Task task = new FloatingTask(new Name("a floating task"),
                    new UniqueTagList("tag1", "tag2"), false, false);
            assertTrue(task.getName().fullName.equals("a floating task"));
            assertTrue(task.getDeadline().isPresent() == false);
            assertTrue(task.getStartingTime().isPresent() == false);
            assertFalse(task.isToday());
            assertTrue(task.getTags()
                    .equalsOrderInsensitive(new UniqueTagList("tag1", "tag2")));
            assertTrue(!task.isDone());
            assertTrue(!task.isManualToday());
            task.setDone(true);
            assertTrue(task.isDone());
            task.setToday();
            assertTrue(task.isManualToday());
            assertTrue(task.getTaskAbsoluteDateTime().equals(""));
        } catch (IllegalValueException e) {
            fail();
        }
    }

    @Test
    public void deadlineTaskTest() throws Exception {
        try {
            Date date = DateUtils.truncate(new Date(), Calendar.DAY_OF_MONTH);
            Task task = new DeadlineTask(new Name("a deadline task"),
                    new UniqueTagList("tag1", "tag2"), date, false, false);
            assertTrue(task.getName().fullName.equals("a deadline task"));
            assertTrue(task.getDeadline().isPresent() == true);
            assertTrue(task.getDeadline().get().getDate().equals(date));
            assertTrue(task.getStartingTime().isPresent() == false);
            assertTrue(task.isToday());
            assertTrue(((DeadlineTask) task).isOverdue());
            assertTrue(task.getTags()
                    .equalsOrderInsensitive(new UniqueTagList("tag1", "tag2")));
            assertTrue(!task.isDone());
            assertTrue(!task.isManualToday());
            task.setDone(true);
            assertTrue(task.isDone());
            task.setToday();
            assertTrue(task.isManualToday());
            SimpleDateFormat dateFormat = new SimpleDateFormat(
                    "dd/MM/yyyy HH:mm:ss");
            assertTrue(task.getTaskAbsoluteDateTime()
                    .equals("Due: " + dateFormat.format(date)));
        } catch (IllegalValueException e) {
            fail();
        }
    }

    @Test
    public void eventTaskTest() throws Exception {
        try {
            Date date = DateUtils.truncate(new Date(), Calendar.DAY_OF_MONTH);
            Date date2 = DateUtils.addDays(date, 1);
            Task task = new EventTask(new Name("a deadline task"),
                    new UniqueTagList("tag1", "tag2"), date2, date, false,
                    false);
            assertTrue(task.getName().fullName.equals("a deadline task"));
            assertTrue(task.getDeadline().isPresent() == true);
            assertTrue(task.getDeadline().get().getDate().equals(date2));
            assertTrue(task.getStartingTime().isPresent() == true);
            assertTrue(task.getStartingTime().get().getDate().equals(date));
            assertTrue(task.isToday());
            assertFalse(((EventTask) task).isOverdue());
            assertTrue(task.getTags()
                    .equalsOrderInsensitive(new UniqueTagList("tag1", "tag2")));
            assertTrue(!task.isDone());
            assertTrue(!task.isManualToday());
            task.setDone(true);
            assertTrue(task.isDone());
            task.setToday();
            assertTrue(task.isManualToday());
            SimpleDateFormat dateFormat = new SimpleDateFormat(
                    "dd/MM/yyyy HH:mm:ss");
            assertTrue(task.getTaskAbsoluteDateTime()
                    .equals("Begin: " + dateFormat.format(date) + "\n   Due: "
                            + dateFormat.format(date2)));
        } catch (IllegalValueException e) {
            fail();
        }
    }

    @Test
    public void eventTaskWrongDateTimeTest() throws Exception {
        try {
            Date date = DateUtils.truncate(new Date(), Calendar.DAY_OF_MONTH);
            Date date2 = DateUtils.addDays(date, 1);
            Task task = new EventTask(new Name("a deadline task"),
                    new UniqueTagList("tag1", "tag2"), date, date2, false,
                    false);
            fail();
        } catch (IllegalValueException e) {
            assertTrue(e.getMessage()
                    .equals("Deadline should be after starting time."));
        }
    }
}
```
