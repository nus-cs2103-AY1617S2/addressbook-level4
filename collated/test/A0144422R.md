# A0144422R
###### /java/seedu/today/logic/LogicManagerTest.java
``` java
    @Test
    public void execute_add_event_successful() throws Exception {
        // setup expectations
        Task toBeAdded = TestUtil.generateEventTaskWithNameTags("name", 0, 1, "tag1");
        expectedAB.addTask(toBeAdded);

        // execute command and verify result
        assertCommandSuccess("add name from today 0000 to tomorrow 0000 #tag1",
                String.format(AddCommand.MESSAGE_SUCCESS, toBeAdded), expectedAB, expectedAB.getTaskList());

    }

    @Test
    public void execute_add_deadline_task_successful() throws Exception {
        // setup expectations
        Task toBeAdded = TestUtil.generateDeadlineTaskWithNameTags("name", 0, "tag1");
        expectedAB.addTask(toBeAdded);

        // execute command and verify result
        assertCommandSuccess("add name due today 0000 #tag1", String.format(AddCommand.MESSAGE_SUCCESS, toBeAdded),
                expectedAB, expectedAB.getTaskList());
    }

    @Test
    public void execute_addDuplicate_notAllowed() throws Exception {
        // setup expectations
        Task toBeAdded = td.futureListEvent;

        // execute command and verify result
        assertCommandFailure(TestUtil.makeAddCommandString(toBeAdded), AddCommand.MESSAGE_DUPLICATE_TASK);

    }

    // ------------- List Command -----------------

    // author A0144422R
    @Test
    public void execute_list_showsAllTasks() throws Exception {
        // prepare expectations
        expectedAB.addTask(td.extraDeadline);
        model.addTask(td.extraDeadline);

        assertCommandSuccess("list", ListCommand.MESSAGE_SUCCESS, expectedAB, expectedAB.getTaskList());
    }

    // ---------- Delete Command --------------
    @Test
    public void execute_deleteIndexNotFound_errorMessageShown() throws Exception {
        assertIndexNotFoundBehaviorForCommand("delete");
    }

    @Test
    public void execute_delete_removesCorrectTask() throws Exception {
        expectedAB.removeTask(td.futureListDeadline);
        assertCommandSuccess("delete F2",
                String.format(DeleteCommand.MESSAGE_DELETE_TASK_SUCCESS, td.futureListDeadline), expectedAB,
                expectedAB.getTaskList());
    }

    // ---------- Done Command ---------------

```
###### /java/seedu/today/logic/LogicManagerTest.java
``` java
    @Test
    public void execute_editInvalidTag_errorMessageShown() {
        String expectedMessage = MESSAGE_INVALID_COMMAND_FORMAT;
        assertCommandFailure("edit F1 #@!89", expectedMessage);
    }

    @Test
    public void execute_editInvalidName_errorMessageShown() {
        String expectedMessage = String.format(Name.MESSAGE_NAME_CONSTRAINTS);
        assertCommandFailure("edit F1 abc$%%^% from 2pm to 3pm", expectedMessage);
    }

    @Test
    public void execute_editNameOnly_successful() throws Exception {
        Task taskToEdit = Task.createTask(td.completedListFloat);
        taskToEdit.setName(new Name("new name"));
        expectedAB.updateTask(8, taskToEdit);

        assertCommandSuccess("edit C1 new name",
                String.format(EditCommand.MESSAGE_EDIT_TASK_SUCCESS, td.completedListFloat), expectedAB,
                expectedAB.getTaskList());
    }

    @Test
    public void execute_editNameAndTag_successful() throws Exception {
        Task taskToEdit = Task.createTask(td.completedListFloat);
        taskToEdit.setName(new Name("new name"));
        UniqueTagList tags = new UniqueTagList("tag1", "tag2");
        taskToEdit.setTags(tags);
        expectedAB.updateTask(8, taskToEdit);

        assertCommandSuccess("edit C1 new name #tag1 #tag2",
                String.format(EditCommand.MESSAGE_EDIT_TASK_SUCCESS, td.completedListFloat), expectedAB,
                expectedAB.getTaskList());
    }

    @Test
    public void execute_editEventNameAndTag_successful() throws Exception {
        DateTime start = new DateTime(DateUtils.truncate(DateUtils.addDays(new Date(), 0), Calendar.DAY_OF_MONTH));
        DateTime end = new DateTime(DateUtils.truncate(DateUtils.addDays(new Date(), 1), Calendar.DAY_OF_MONTH));
        Task taskToEdit = Task.createTask(new Name("new name"), new UniqueTagList("tag1", "tag2"), Optional.of(end),
                Optional.of(start), td.completedListFloat.isDone(), td.completedListFloat.isManualToday());
        expectedAB.updateTask(8, taskToEdit);

        assertCommandSuccess("edit C1 new name from today at 0000 to tomorrow at 0000 #tag1 #tag2",
                String.format(EditCommand.MESSAGE_EDIT_TASK_SUCCESS, td.completedListFloat), expectedAB,
                expectedAB.getTaskList());
    }

    @Test
    public void execute_editDeadlineTaskTag_successful() throws Exception {
        DateTime end = new DateTime(DateUtils.truncate(DateUtils.addDays(new Date(), 1), Calendar.DAY_OF_MONTH));
        Task taskToEdit = Task.createTask(td.completedListFloat.getName(), new UniqueTagList("tag1", "tag2"),
                Optional.of(end), Optional.empty(), td.completedListFloat.isDone(),
                td.completedListFloat.isManualToday());
        expectedAB.updateTask(8, taskToEdit);

        assertCommandSuccess("edit C1 due tomorrow at 0000 #tag1 #tag2",
                String.format(EditCommand.MESSAGE_EDIT_TASK_SUCCESS, td.completedListFloat), expectedAB,
                expectedAB.getTaskList());
    }

    @Test
    public void execute_editConfusingName_successful() throws Exception {
        Task taskToEdit = Task.createTask(td.completedListFloat);
        taskToEdit.setName(new Name("from today uihasduhas to tomorrow uhaius"));
        taskToEdit.setTags(new UniqueTagList("tag1", "tag2"));
        expectedAB.updateTask(8, taskToEdit);

        assertCommandSuccess("edit C1 from today uihasduhas to tomorrow uhaius #tag1 #tag2",
                String.format(EditCommand.MESSAGE_EDIT_TASK_SUCCESS, td.completedListFloat), expectedAB,
                expectedAB.getTaskList());
    }

    @Test
    public void execute_editDuplicateTask_notAllowed() throws Exception {
        assertCommandFailure("edit C1 " + td.futureListFloat.getName().toString() + " #tag3 #tag4",
                EditCommand.MESSAGE_DUPLICATE_TASK);
    }

    @Test
    public void execute_editIndexNotFound_notAllowed() throws Exception {
        assertCommandFailure("edit C100 Task 3 #tag3 #tag4", Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);
    }
```
###### /java/seedu/today/logic/LogicManagerTest.java
``` java
    @Test
    public void execute_find_date() throws Exception {
        List<Task> expectedList = Arrays.asList(td.todayListDeadline, td.completedListDeadline, td.completedListEvent);

        assertCommandSuccess("find due today", Command.getMessageForTaskListShownSummary(1), expectedAB, expectedList);
    }

    @Test
    public void execute_find_twoArgs() throws Exception {
        List<Task> expectedList = Arrays.asList(td.completedListDeadline, td.completedListEvent);

        assertCommandSuccess("find go goes", Command.getMessageForTaskListShownSummary(0), expectedAB, expectedList);
    }

    @Test
    public void execute_find_fourArgs() throws Exception {
        List<Task> expectedList = Arrays.asList(td.completedListFloat, td.completedListDeadline, td.completedListEvent);

        assertCommandSuccess("find go goes rock mark", Command.getMessageForTaskListShownSummary(0), expectedAB,
                expectedList);
    }

    // ------------------------ Rename Tag Command -----------------------

```
###### /java/seedu/today/logic/parser/AddParserTest.java
``` java
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

import java.util.Date;
import java.util.HashSet;

import org.junit.Test;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import seedu.today.logic.commands.AddCommand;
import seedu.today.logic.commands.Command;
import seedu.today.logic.commands.IncorrectCommand;
import seedu.today.logic.parser.AddCommandParser;
import seedu.today.model.tag.Tag;
import seedu.today.model.tag.UniqueTagList;
import seedu.today.model.task.DeadlineTask;
import seedu.today.model.task.EventTask;
import seedu.today.model.task.FloatingTask;
import seedu.today.model.task.Name;
import seedu.today.model.task.Task;;

public class AddParserTest extends AddCommandParser {
    @Test
    public void parserTestWithTitle() throws Exception {
        AddCommand command = (AddCommand) parse("CS2103 project due");
        Task task = command.getTask();
        Name name = new Name("CS2103 project due");
        UniqueTagList tags = new UniqueTagList(new HashSet<>());
        assertTrue(task instanceof FloatingTask);
        assertTrue(!task.getDeadline().isPresent());
        assertTrue(task.getName().toString().equals(name.toString()));
        assertTrue(!task.getStartingTime().isPresent());
        assertTrue(task.getTags().toSet().equals(tags.toSet()));
        assertTrue(task.getTaskDateTime().equals(""));
        assertTrue(task.getTaskAbsoluteDateTime().equals(""));
    }

    @Test
    public void parserTestWithTitleDeadlineTag() throws Exception {
        AddCommand command = (AddCommand) parse("CS2103 project due today #schoolwork #team");
        Task task = command.getTask();
        Name name = new Name("CS2103 project");
        UniqueTagList tags = new UniqueTagList(new HashSet<>());
        ObservableList<Tag> listOfTags = FXCollections.observableArrayList();
        listOfTags.addAll(new Tag("schoolwork"), new Tag("team"));
        tags = new UniqueTagList(listOfTags);
        assertTrue(task instanceof DeadlineTask);
        assertTrue(task.getDeadline().get().isSameDay(new Date()));
        assertTrue(task.getName().toString().equals(name.toString()));
        assertTrue(!task.getStartingTime().isPresent());
        assertTrue(task.getTags().toSet().equals(tags.toSet()));
        assertFalse(task.getTaskDateTime() == null);
    }

    @Test
    public void parserTestWithTitleDeadlineStartingTimeTag() throws Exception {
        AddCommand command = (AddCommand) parse("CS2103 project from 2 days later to 20/4/2017 #schoolwork #team");
        Task task = command.getTask();
        Name name = new Name("CS2103 project");
        UniqueTagList tags = new UniqueTagList(new HashSet<>());
        ObservableList<Tag> listOfTags = FXCollections.observableArrayList();
        listOfTags.addAll(new Tag("schoolwork"), new Tag("team"));
        tags = new UniqueTagList(listOfTags);
        long milisecondsTilDeadline = 1492646400000L;
        long milisecondsTilStartingTime = new Date().getTime() + 24 * 60 * 60 * 1000 * 2;
        assertTrue(task instanceof EventTask);
        assertTrue(task.getDeadline().get().isSameDay(new Date(milisecondsTilDeadline)));
        assertTrue(task.getName().toString().equals(name.toString()));
        assertTrue(task.getStartingTime().get().isSameDay(new Date(milisecondsTilStartingTime)));
        assertTrue(task.getTags().toSet().equals(tags.toSet()));
        assertFalse(task.getTaskDateTime() == null);
    }

    @Test
    public void parserTestWithTitle2() throws Exception {
        AddCommand command = (AddCommand) parse("CS2103 project from school to home");
        Task task = command.getTask();
        Name name = new Name("CS2103 project from school to home");
        UniqueTagList tags = new UniqueTagList(new HashSet<>());
        assertTrue(task instanceof FloatingTask);
        assertTrue(!task.getDeadline().isPresent());
        assertTrue(task.getName().toString().equals(name.toString()));
        assertTrue(!task.getStartingTime().isPresent());
        assertTrue(task.getTags().toSet().equals(tags.toSet()));
        assertTrue(task.getTaskDateTime().equals(""));
        assertTrue(task.getTaskAbsoluteDateTime().equals(""));
    }

    @Test
    public void parserTestWithTitleDeadlineStartingTime() throws Exception {
        AddCommand command = (AddCommand) parse("CS2103 project from school to home from 2 days later to 20/4/2017");
        Task task = command.getTask();
        Name name = new Name("CS2103 project from school to home");
        UniqueTagList tags = new UniqueTagList(new HashSet<>());
        long milisecondsTilDeadline = 1492646400000L;
        long milisecondsTilStartingTime = new Date().getTime() + 24 * 60 * 60 * 1000 * 2;
        assertTrue(task instanceof EventTask);
        assertTrue(task.getDeadline().get().isSameDay(new Date(milisecondsTilDeadline)));
        assertTrue(task.getName().toString().equals(name.toString()));
        assertTrue(task.getStartingTime().get().isSameDay(new Date(milisecondsTilStartingTime)));
        assertTrue(task.getTags().toSet().equals(tags.toSet()));
        assertFalse(task.getTaskDateTime() == null);
    }

    @Test
    public void parserTestWithNameException() throws Exception {
        Command command = parse("CS2103 project^^^^ due today");
        assertTrue(command.getClass().equals(new IncorrectCommand("").getClass()));
    }

    @Test
    public void parserTestWithTagException() throws Exception {
        Command command = parse("CS2103 project #yyy^ #^^^ due today");
        assertTrue(command.getClass().equals(new IncorrectCommand("").getClass()));
    }
}
```
###### /java/seedu/today/model/task/DateTimeTest.java
``` java
public class DateTimeTest {
    @Test
    public void dateTimeTest() {
        DateTime dateTime = new DateTime(
                new PrettyTimeParser().parse("30 APRIL 2017").get(0));
        DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
        assertTrue(df.format(dateTime.getDate()).equals("30/04/2017"));
        Date date1 = new PrettyTimeParser().parse("31 May 2017").get(0);
        assertFalse(dateTime.isSameDay(date1));
        dateTime.set(date1);
        assertTrue(df.format(dateTime.getDate()).equals("31/05/2017"));
        Date date2 = new PrettyTimeParser().parse("31 May 2017 3.45pm").get(0);
        assertTrue(dateTime.isSameDay(date2));
        Date date3 = new PrettyTimeParser().parse("5 seconds ago ").get(0);
        dateTime.set(date3);
        assertTrue(/*
                    * dateTime.toString().equals("Ƭ��֮ǰ") ||
                    */ dateTime.toString().equals("moments ago"));
    }
}
```
###### /java/seedu/today/model/task/TaskTest.java
``` java
package seedu.today.model.task;

import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;
import static org.junit.Assert.fail;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

import org.junit.Test;
import org.ocpsoft.prettytime.shade.org.apache.commons.lang.time.DateUtils;

import seedu.today.commons.exceptions.IllegalValueException;
import seedu.today.model.tag.UniqueTagList;
import seedu.today.model.task.DeadlineTask;
import seedu.today.model.task.EventTask;
import seedu.today.model.task.FloatingTask;
import seedu.today.model.task.Name;
import seedu.today.model.task.Task;

public class TaskTest {
    @Test
    public void floatingTaskTest() throws Exception {
        try {
            Task task = new FloatingTask(new Name("a floating task"), new UniqueTagList("tag1", "tag2"), false, false);
            assertTrue(task.getName().toString().equals("a floating task"));
            assertTrue(task.getDeadline().isPresent() == false);
            assertTrue(task.getStartingTime().isPresent() == false);
            assertFalse(task.isToday());
            assertTrue(task.getTags().equalsOrderInsensitive(new UniqueTagList("tag1", "tag2")));
            assertTrue(!task.isDone());
            assertTrue(!task.isManualToday());
            task.setDone(true);
            assertTrue(task.isDone());
            task.setToday(true);
            assertTrue(task.isManualToday());
            assertTrue(task.getTaskAbsoluteDateTime().equals(""));
        } catch (IllegalValueException e) {
            fail();
        }
    }

    @Test
    public void deadlineTaskTest() throws Exception {
        try {
            Date date = DateUtils.truncate(new Date(), Calendar.DAY_OF_MONTH);
            Task task = new DeadlineTask(new Name("a deadline task"), new UniqueTagList("tag1", "tag2"), date, false,
                    false);
            assertTrue(task.getName().toString().equals("a deadline task"));
            assertTrue(task.getDeadline().isPresent() == true);
            assertTrue(task.getDeadline().get().getDate().equals(date));
            assertTrue(task.getStartingTime().isPresent() == false);
            assertTrue(task.isToday());
            assertTrue(((DeadlineTask) task).isOverdue());
            assertTrue(task.getTags().equalsOrderInsensitive(new UniqueTagList("tag1", "tag2")));
            assertTrue(!task.isDone());
            assertTrue(!task.isManualToday());
            task.setDone(true);
            assertTrue(task.isDone());
            task.setToday(true);
            assertTrue(task.isManualToday());
            SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
            assertTrue(task.getTaskAbsoluteDateTime().equals("Due: " + dateFormat.format(date)));
        } catch (IllegalValueException e) {
            fail();
        }
    }

    @Test
    public void eventTaskTest() throws Exception {
        try {
            Date date = DateUtils.truncate(new Date(), Calendar.DAY_OF_MONTH);
            Date date2 = DateUtils.addDays(date, 1);
            Task task = new EventTask(new Name("a deadline task"), new UniqueTagList("tag1", "tag2"), date2, date,
                    false, false);
            assertTrue(task.getName().toString().equals("a deadline task"));
            assertTrue(task.getDeadline().isPresent() == true);
            assertTrue(task.getDeadline().get().getDate().equals(date2));
            assertTrue(task.getStartingTime().isPresent() == true);
            assertTrue(task.getStartingTime().get().getDate().equals(date));
            assertTrue(task.isToday());
            assertFalse(((EventTask) task).isOverdue());
            assertTrue(task.getTags().equalsOrderInsensitive(new UniqueTagList("tag1", "tag2")));
            assertTrue(!task.isDone());
            assertTrue(!task.isManualToday());
            task.setDone(true);
            assertTrue(task.isDone());
            task.setToday(true);
            assertTrue(task.isManualToday());
            SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
            assertTrue(task.getTaskAbsoluteDateTime()
                    .equals("Begin: " + dateFormat.format(date) + "\n   End: " + dateFormat.format(date2)));
        } catch (IllegalValueException e) {
            fail();
        }
    }

    @Test
    public void eventTaskWrongDateTimeTest() throws Exception {
        try {
            Date date = DateUtils.truncate(new Date(), Calendar.DAY_OF_MONTH);
            Date date2 = DateUtils.addDays(date, 1);
            Task task = new EventTask(new Name("a deadline task"), new UniqueTagList("tag1", "tag2"), date, date2,
                    false, false);
            fail();
        } catch (IllegalValueException e) {
            assertTrue(e.getMessage().equals("Deadline should be after starting time."));
        }
    }
}
```
###### /java/seedu/today/testutil/TestUtil.java
``` java
    public static Task generateEventTaskWithNameTags(String name, int days1, int days2, String... tagNames)
            throws Exception {
        ArrayList<Tag> tags = new ArrayList<Tag>();
        for (String tagName : tagNames) {
            tags.add(new Tag(tagName));
        }
        Date start = DateUtils.truncate(DateUtils.addDays(new Date(), days1), Calendar.DAY_OF_MONTH);
        Date end = DateUtils.truncate(DateUtils.addDays(new Date(), days2), Calendar.DAY_OF_MONTH);
        return new EventTask(new Name(name), new UniqueTagList(tags), end, start, false, false);
    }

```
###### /java/seedu/today/testutil/TestUtil.java
``` java
    public static Task generateDeadlineTaskWithNameTags(String name, int days, String... tagNames) throws Exception {
        ArrayList<Tag> tags = new ArrayList<Tag>();
        for (String tagName : tagNames) {
            tags.add(new Tag(tagName));
        }
        Date end = DateUtils.truncate(DateUtils.addDays(new Date(), days), Calendar.DAY_OF_MONTH);
        return new DeadlineTask(new Name(name), new UniqueTagList(tags), end, false, false);
    }
}
```
