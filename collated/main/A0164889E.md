# A0164889E
###### \java\seedu\address\logic\commands\GroupCommand.java
``` java
/**
 * Finds and lists all persons in address book whose group contains any of the argument keywords.
 * Keyword matching is case sensitive.
 */
public class GroupCommand extends Command {

    public static final String COMMAND_WORD = "group";

    public static final String MESSAGE_USAGE = COMMAND_WORD + ": Finds all tasks whose groups contain any of "
            + "the specified keywords (case-sensitive) and displays them as a list with index numbers.\n"
            + "Parameters: KEYWORD [MORE_KEYWORDS]...\n"
            + "Example: " + COMMAND_WORD + " learning";

    private final Set<String> keywords;

    public GroupCommand(Set<String> keywords) {
        this.keywords = keywords;
    }

    @Override
    public CommandResult execute() {
        model.updateFilteredPersonListGroup(keywords);
        return new CommandResult(getMessageForPersonListShownSummary(model.getFilteredPersonList().size()));
    }

}
```
###### \java\seedu\address\logic\Logic.java
``` java
    /** Returns the filtered list of tasks for Complete tasks*/
    ObservableList<ReadOnlyTask> getFilteredPersonListComplete();

```
###### \java\seedu\address\logic\LogicManager.java
``` java
    @Override
    public ObservableList<ReadOnlyTask> getFilteredPersonListComplete() {
        return model.getFilteredPersonListComplete();
    }

```
###### \java\seedu\address\logic\parser\GroupCommandParser.java
``` java
/**
 * Parses input arguments and creates a new GroupCommand object
 */
public class GroupCommandParser {

    /**
     * Parses the given {@code String} of arguments in the context of the GroupCommand
     * and returns an GroupCommand object for execution.
     */
    public Command parse(String args) {
        final Matcher matcher = KEYWORDS_ARGS_FORMAT.matcher(args.trim());
        if (!matcher.matches()) {
            return new IncorrectCommand(
                    String.format(MESSAGE_INVALID_COMMAND_FORMAT, GroupCommand.MESSAGE_USAGE));
        }

        // keywords delimited by whitespace
        final String[] keywords = matcher.group("keywords").split("\\s+");
        final Set<String> keywordSet = new HashSet<>(Arrays.asList(keywords));
        return new GroupCommand(keywordSet);
    }

}
```
###### \java\seedu\address\logic\parser\Parser.java
``` java
        case GroupCommand.COMMAND_WORD:
            return new GroupCommandParser().parse(arguments);

        case ListCommand.COMMAND_WORD:
            return new ListCommand();

```
###### \java\seedu\address\model\Model.java
``` java
    /** Returns the filtered task complete list as an {@code UnmodifiableObservableList<ReadOnlyTask>} */
    UnmodifiableObservableList<ReadOnlyTask> getFilteredPersonListComplete();

    /** Updates the filter of the filtered person list to show all persons */
    void updateFilteredListToShowAll();

    /** Updates the filter of the filtered task list to filter by the given keywords for FindCommand*/
    void updateFilteredPersonList(Set<String> keywords);

```
###### \java\seedu\address\model\Model.java
``` java
    /** Updates the filter of the filtered task list to filter by the given keywords for GroupCommand*/
    void updateFilteredPersonListGroup(Set<String> keywords);

```
###### \java\seedu\address\model\ModelManager.java
``` java
    private final FilteredList<ReadOnlyTask> filteredPersonsComplete;

    /**
     * Initializes a ModelManager with the given addressBook and userPrefs.
     */
    public ModelManager(ReadOnlyTaskManager addressBook, UserPrefs userPrefs) {
        super();
        assert !CollectionUtil.isAnyNull(addressBook, userPrefs);

        logger.fine("Initializing with address book: " + addressBook + " and user prefs " + userPrefs);

        this.addressBook = new YTomorrow(addressBook);
        this.history = new History<ReadOnlyTaskManager>();
        filteredPersons = new FilteredList<>(this.addressBook.getPersonList());
```
###### \java\seedu\address\model\ModelManager.java
``` java
        filteredPersonsComplete = new FilteredList<>(this.addressBook.getPersonList());

        indicateCompleteListToChange();
```
###### \java\seedu\address\model\ModelManager.java
``` java
        indicateCompleteListToChange();
```
###### \java\seedu\address\model\ModelManager.java
``` java
        indicateCompleteListToChange();
```
###### \java\seedu\address\model\ModelManager.java
``` java
        indicateCompleteListToChange();
```
###### \java\seedu\address\model\ModelManager.java
``` java
        indicateCompleteListToChange();
```
###### \java\seedu\address\model\ModelManager.java
``` java
            indicateCompleteListToChange();
```
###### \java\seedu\address\model\ModelManager.java
``` java
            indicateCompleteListToChange();
```
###### \java\seedu\address\model\ModelManager.java
``` java
        indicateCompleteListToChange();
```
###### \java\seedu\address\model\ModelManager.java
``` java
    public void indicateCompleteListToChange() {
        UniqueTagList tags;
        try {
            tags = new UniqueTagList("complete");
            updateFilteredPersonListTag(tags);
        } catch (DuplicateTagException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalValueException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

```
###### \java\seedu\address\model\ModelManager.java
``` java
    @Override
    public UnmodifiableObservableList<ReadOnlyTask> getFilteredPersonListComplete() {
        return new UnmodifiableObservableList<>(filteredPersonsComplete);
    }

    @Override
    public void updateFilteredListToShowAll() {
        filteredPersons.setPredicate(null);
    }

    @Override
    public void updateFilteredPersonList(Set<String> keywords) {
        updateFilteredPersonList(new PredicateExpression(new NameQualifier(keywords)));
    }

    private void updateFilteredPersonList(Expression expression) {
        filteredPersons.setPredicate(expression::satisfies);
    }

```
###### \java\seedu\address\model\ModelManager.java
``` java
    @Override
    public void updateFilteredPersonListGroup(Set<String> keywords) {
        updateFilteredPersonListGroup(new PredicateExpression(new GroupQualifier(keywords)));
    }

    private void updateFilteredPersonListGroup(Expression expression) {
        filteredPersons.setPredicate(expression::satisfies);
    }

    public void updateFilteredPersonListTag(UniqueTagList keywords) {
        updateFilteredPersonListTag(new PredicateExpression(new TagQualifier(keywords)));
    }

    private void updateFilteredPersonListTag(Expression expression) {
        filteredPersonsComplete.setPredicate(expression::satisfies);
    }
```
###### \java\seedu\address\model\ModelManager.java
``` java
    private class GroupQualifier implements Qualifier {
        private Set<String> groupKeyWords;

        GroupQualifier(Set<String> groupKeyWords) {
            this.groupKeyWords = groupKeyWords;
        }

        @Override
        public boolean run(ReadOnlyTask task) {
            return groupKeyWords.stream()
                    .filter(keyword -> StringUtil.containsWordIgnoreCase(task.getGroup().value, keyword))
                    .findAny()
                    .isPresent();
        }

        @Override
        public String toString() {
            return "name=" + String.join(", ", groupKeyWords);
        }
    }

```
###### \java\seedu\address\model\task\Group.java
``` java
package seedu.address.model.task;

import seedu.address.commons.exceptions.IllegalValueException;

/**
 * Represents a Task's group in the Task Manager.
 * Guarantees: immutable; is valid as declared in {@link #isValidGroup(String)}
 */
public class Group {

    public static final String MESSAGE_GROUP_CONSTRAINTS =
            "Task group can take any values, and it should not be blank";

    /*
     * The first character of the group must not be a whitespace,
     * otherwise " " (a blank string) becomes a valid input.
     */
    public static final String GROUP_VALIDATION_REGEX = "[^\\s].*";

    public final String value;

    /**
     * Validates given address.
     *
     * @throws IllegalValueException if given group string is invalid.
     */
    public Group(String group) throws IllegalValueException {
        assert group != null;
        if (!isValidGroup(group)) {
            throw new IllegalValueException(MESSAGE_GROUP_CONSTRAINTS);
        }
        this.value = group;
    }

    /**
     * Returns true if a given string is a valid group.
     */
    public static boolean isValidGroup(String test) {
        return test.matches(GROUP_VALIDATION_REGEX);
    }

    @Override
    public String toString() {
        return value;
    }

    @Override
    public boolean equals(Object other) {
        return other == this // short circuit if same object
                || (other instanceof Group // instanceof handles nulls
                && this.value.equals(((Group) other).value)); // state check
    }

    @Override
    public int hashCode() {
        return value.hashCode();
    }

}
```
###### \java\seedu\address\ui\MainWindow.java
``` java
    private TaskListPanelComplete personListPanelComplete;
    private TaskListPanel personListPanel;
    private Config config;
    private UserPrefs prefs;

    @FXML
    private AnchorPane commandBoxPlaceholder;

    @FXML
    private AnchorPane personListPanelPlaceholder;

```
###### \java\seedu\address\ui\MainWindow.java
``` java
    @FXML
    private AnchorPane personListPanelCompletePlaceholder;

    @FXML
    private AnchorPane resultDisplayPlaceholder;

    @FXML
    private AnchorPane statusbarPlaceholder;

    @FXML
    private MenuItem saveMenuItem;

    @FXML
    private MenuItem loadMenuItem;

    @FXML
    private MenuItem exportMenuItem;

    @FXML
    private MenuItem importMenuItem;

    @FXML
    private MenuItem helpMenuItem;

    @FXML
    private MenuItem themeMenuItem;

    public MainWindow(Stage primaryStage, Config config, UserPrefs prefs, Logic logic) {
        super(FXML, primaryStage);

        // Set dependencies
        this.logic = logic;
        this.config = config;
        this.prefs = prefs;

        // Configure the UI
        setTitle(config.getAppTitle());
        setIcon(ICON);
        setWindowMinSize(MIN_HEIGHT, MIN_WIDTH);
        setWindowDefaultSize(prefs);
        Scene scene = new Scene(getRoot());
        getStage().setScene(scene);
        ThemeWindow.changeTheme(getRoot(), prefs.getGuiSettings().getStyleSheet());
        setAccelerators();
    }

    private void setAccelerators() {
        setAccelerator(saveMenuItem,   KeyCombination.valueOf("ctrl+s"));
        setAccelerator(loadMenuItem,   KeyCombination.valueOf("ctrl+v"));
        setAccelerator(exportMenuItem, KeyCombination.valueOf("ctrl+e"));
        setAccelerator(importMenuItem, KeyCombination.valueOf("ctrl+i"));
        setAccelerator(helpMenuItem,   KeyCombination.valueOf("ctrl+h"));
        setAccelerator(themeMenuItem,  KeyCombination.valueOf("ctrl+c"));
    }

    void fillInnerParts() {
        personListPanel = new TaskListPanel(getPersonListPlaceholder(), logic.getFilteredPersonList());
```
###### \java\seedu\address\ui\MainWindow.java
``` java
        personListPanelComplete = new TaskListPanelComplete(getPersonListCompletePlaceholder(),
                logic.getFilteredPersonListComplete());
```
###### \java\seedu\address\ui\MainWindow.java
``` java
    private AnchorPane getPersonListCompletePlaceholder() {
        return personListPanelCompletePlaceholder;
    }

    /**
     * Returns the current size and the position of the main Window.
     */
    GuiSettings getCurrentGuiSetting() {
        return new GuiSettings(
                stage.getWidth(),
                stage.getHeight(),
                (int) stage.getX(),
                (int) stage.getY(),
                Paths.get(getRoot().getStylesheets().get(0)).getFileName().toString().replaceFirst("[.][^.]+$", ""),
                prefs.getGuiSettings().getLastLoadedYTomorrow());
    }

    @FXML
    public void handleHelp() {
        HelpWindow helpWindow = new HelpWindow();
        helpWindow.show();
    }

```
###### \java\seedu\address\ui\MainWindow.java
``` java
    public TaskListPanelComplete getPersonListPanelComplete() {
        return this.personListPanelComplete;
    }
}
```
###### \java\seedu\address\ui\TaskCardComplete.java
``` java
public class TaskCardComplete extends UiPart<Region> {

    private static final String FXML = "PersonListCardComplete.fxml";

    @FXML
    private HBox cardPane;
    @FXML
    private Label name;
    @FXML
    private Label id;
    @FXML
    private Label end;
    @FXML
    private Label start;
    @FXML
    private Label group;

    public TaskCardComplete(ReadOnlyTask person, int displayedIndex) {
        super(FXML);

        name.setText(person.getName().fullName);
        id.setText(displayedIndex + ". ");

        if (person.getEndDate() == null) {
            end.setVisible(false);
            end.setStyle("-fx-font-size: 0pt;");
        } else {
            end.setText("Ends:   " + person.getEndDate());
        }

        if (person.getStartDate() == null) {
            start.setVisible(false);
            start.setStyle("-fx-font-size: 0pt;");
        } else {
            start.setText("Starts: " + person.getStartDate());
        }

        group.setText(person.getGroup().value);

        if (person.hasPassed()) {
            setStyleToIndicateEndDatePassed();
        }

        cardPane.autosize();
    }

    /**
     * Sets the command box style to indicate a failed command.
     */
    private void setStyleToIndicateEndDatePassed() {
        cardPane.getStyleClass().add(Ui.ERROR_STYLE_CLASS);
    }
}
```
###### \java\seedu\address\ui\TaskListPanelComplete.java
``` java
/**
 * Panel containing the list of complete tasks.
 */
public class TaskListPanelComplete extends UiPart<Region> {
    private static final String FXML = "PersonListPanelComplete.fxml";

    @FXML
    private ListView<ReadOnlyTask> personListViewComplete;

    public TaskListPanelComplete(AnchorPane personListCompletePlaceholder, ObservableList<ReadOnlyTask> personList) {
        super(FXML);
        setConnections(personList);
        addToPlaceholder(personListCompletePlaceholder);
    }

    private void setConnections(ObservableList<ReadOnlyTask> personList) {
        personListViewComplete.setItems(personList);
        personListViewComplete.setCellFactory(listView -> new PersonListViewCellComplete());
        setEventHandlerForSelectionChangeEvent();
    }

    private void addToPlaceholder(AnchorPane placeHolderPane) {
        SplitPane.setResizableWithParent(placeHolderPane, false);
        FxViewUtil.applyAnchorBoundaryParameters(getRoot(), 0.0, 0.0, 0.0, 0.0);
        placeHolderPane.getChildren().add(getRoot());
    }

    private void setEventHandlerForSelectionChangeEvent() {
        personListViewComplete.getSelectionModel().selectedItemProperty()
                .addListener((observable, oldValue, newValue) -> {
                    if (newValue != null) {
                        LOGGER.fine("Selection in person list panel changed to : '" + newValue + "'");
                        raise(new TaskPanelSelectionChangedEvent(newValue));
                    }
                });
    }

    public void scrollTo(int index) {
        Platform.runLater(() -> {
            personListViewComplete.scrollTo(index);
            personListViewComplete.getSelectionModel().clearAndSelect(index);
        });
    }

    class PersonListViewCellComplete extends ListCell<ReadOnlyTask> {

        @Override
        protected void updateItem(ReadOnlyTask person, boolean empty) {
            super.updateItem(person, empty);

            if (empty || person == null) {
                setGraphic(null);
                setText(null);
            } else {
                setGraphic(new TaskCardComplete(person, getIndex() + 1).getRoot());
            }
        }
    }

}
```
