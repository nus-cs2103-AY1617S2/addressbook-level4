# A0093999Y
###### /java/seedu/today/commons/events/ui/ShowCompletedTaskEvent.java
``` java
/**
 * Informs the Completed Task Panel whether to Show, Hide, or Toggle.
 */
public class ShowCompletedTaskEvent extends BaseEvent {

    public enum Action {
        SHOW, HIDE, TOGGLE
    };

    public final Action action;

    public ShowCompletedTaskEvent(Action action) {
        this.action = action;
    }

    @Override
    public String toString() {
        return this.getClass().getSimpleName();
    }

}
```
###### /java/seedu/today/logic/commands/DeleteTagCommand.java
``` java
/**
 * Deletes an existing tag in the task manager.
 */
public class DeleteTagCommand extends Command {

    public static final String COMMAND_WORD = "deletetag";

    public static final String MESSAGE_DELETE_TAG_SUCCESS = "Deleted Tag: %1$s";
    public static final String MESSAGE_SUCCESS_STATUS_BAR = "Tag deleted successfully.";

    private final Tag oldTag;

    /**
     * @param oldTagName
     *            is the name of the tag to be deleted
     */
    public DeleteTagCommand(String oldTagName) throws IllegalValueException {
        assert oldTagName != null;

        this.oldTag = new Tag(oldTagName);
    }

    @Override
    public CommandResult execute() throws CommandException {
        model.updateFilteredListToShowAll();
        List<ReadOnlyTask> lastShownList = model.getFilteredTaskList();

        for (int index = 0; index < lastShownList.size(); index++) {
            removeTagFromTask(lastShownList, index);
        }

        return new CommandResult(String.format(MESSAGE_DELETE_TAG_SUCCESS, oldTag.getTagName()),
                MESSAGE_SUCCESS_STATUS_BAR);
    }

    /**
     * Takes a task from the list, deletes the designated tag, and updates it to
     * model
     * 
     * @param lastShownList
     *            list from model
     * @param index
     *            index of task in model
     * @throws CommandException
     */
    private void removeTagFromTask(List<ReadOnlyTask> lastShownList, int index) throws CommandException {
        ReadOnlyTask taskToEdit = lastShownList.get(index);
        boolean containsOldTag = false;
        Set<Tag> newTagList = new HashSet<Tag>();
        Set<Tag> tags = taskToEdit.getTags().toSet();
        for (Tag tag : tags) {
            if (tag.getTagName().equals(oldTag.getTagName())) {
                containsOldTag = true;
            } else {
                newTagList.add(tag);
            }
        }

        if (containsOldTag) {
            try {
                Task newTask = Task.createTask(taskToEdit.getName(), new UniqueTagList(newTagList),
                        taskToEdit.getDeadline(), taskToEdit.getStartingTime(), taskToEdit.isDone(),
                        taskToEdit.isManualToday());
                model.updateTask(index, newTask);
            } catch (UniqueTaskList.DuplicateTaskException dpe) {
                throw new CommandException(EditCommand.MESSAGE_DUPLICATE_TASK);
            } catch (IllegalValueException e) {
                // Should not happen
                throw new CommandException(e.getMessage());
            }

        }
    }
}
```
###### /java/seedu/today/logic/commands/DoneCommand.java
``` java
/**
 * Indicates an existing task is done in the task manager.
 */
public class DoneCommand extends Command {

    public static final String COMMAND_WORD = "done";

    public static final String MESSAGE_DONE_TASK_SUCCESS = "Task Done: %1$s";
    public static final String MESSAGE_SUCCESS_STATUS_BAR = "Task done successfully.";

    private final int filteredTaskListIndex;

    /**
     * @param filteredTaskListIndex
     *            the index of the task in the filtered task list to edit
     */
    public DoneCommand(int filteredTaskListIndex) {
        assert filteredTaskListIndex > 0;
        // converts filteredTaskListIndex from one-based to zero-based.
        this.filteredTaskListIndex = filteredTaskListIndex - 1;
    }

    @Override
    public CommandResult execute() throws CommandException {
        List<ReadOnlyTask> lastShownList = model.getFilteredTaskList();

        if (filteredTaskListIndex >= lastShownList.size()) {
            throw new CommandException(Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);
        }

        ReadOnlyTask taskToDone = lastShownList.get(filteredTaskListIndex);
        try {
            Task doneTask = createDoneTask(taskToDone);
            model.updateTask(filteredTaskListIndex, doneTask);
            model.updateFilteredListToShowAll();
            return new CommandResult(String.format(MESSAGE_DONE_TASK_SUCCESS, doneTask), MESSAGE_SUCCESS_STATUS_BAR);
        } catch (UniqueTaskList.DuplicateTaskException dpe) {
            throw new CommandException(EditCommand.MESSAGE_DUPLICATE_TASK);
        } catch (IllegalValueException e) {
            // Should not Happen
            throw new CommandException(e.getMessage());
        }

    }

    /**
     * Creates and returns a {@code Task} that is done
     *
     * @throws IllegalValueException
     */
    private static Task createDoneTask(ReadOnlyTask taskToDone) throws IllegalValueException {
        assert taskToDone != null;

        boolean updatedDone = true;
        return Task.createTask(taskToDone.getName(), taskToDone.getTags(), taskToDone.getDeadline(),
                taskToDone.getStartingTime(), updatedDone, taskToDone.isManualToday());
    }
}
```
###### /java/seedu/today/logic/commands/EditCommand.java
``` java
    /**
     * Creates and returns a {@code Task} with the details of {@code taskToEdit}
     * edited with {@code editTaskDescriptor}.
     *
     * @throws IllegalValueException
     */
    private static Task createEditedTask(ReadOnlyTask taskToEdit, EditTaskDescriptor editTaskDescriptor)
            throws IllegalValueException {
        assert taskToEdit != null;

        Name updatedName = editTaskDescriptor.getName().orElseGet(taskToEdit::getName);
        UniqueTagList updatedTags = editTaskDescriptor.getTags().orElseGet(taskToEdit::getTags);
        Optional<DateTime> updatedStartingTime;
        Optional<DateTime> updatedDeadline;

        if (editTaskDescriptor.getDeadline().isPresent()) {
            updatedStartingTime = editTaskDescriptor.getStartingTime();
            updatedDeadline = editTaskDescriptor.getDeadline();
        } else {
            updatedStartingTime = taskToEdit.getStartingTime();
            updatedDeadline = taskToEdit.getDeadline();
        }

        return Task.createTask(updatedName, updatedTags, updatedDeadline, updatedStartingTime, taskToEdit.isDone(),
                taskToEdit.isManualToday());
    }

    /**
     * Stores the details to edit the task with. Each non-empty field value will
     * replace the corresponding field value of the task.
     */
    public static class EditTaskDescriptor {
        private Optional<Name> name = Optional.empty();
        private Optional<UniqueTagList> tags = Optional.empty();
        private Optional<DateTime> deadline = Optional.empty();
        private Optional<DateTime> startingTime = Optional.empty();

        public EditTaskDescriptor() {
        }

        public EditTaskDescriptor(EditTaskDescriptor toCopy) {
            this.name = toCopy.getName();
            this.tags = toCopy.getTags();
            this.deadline = toCopy.getDeadline();
            this.startingTime = toCopy.getStartingTime();
        }

```
###### /java/seedu/today/logic/commands/ListCompletedCommand.java
``` java
/**
 * Opens the completed task list in the task manager for the user.
 */
public class ListCompletedCommand extends Command {

    public static final String COMMAND_WORD = "listcompleted";

    public static final String MESSAGE_SUCCESS = "Listed all completed tasks";
    public static final String MESSAGE_SUCCESS_STATUS_BAR = MESSAGE_SUCCESS;

    @Override
    public CommandResult execute() {
        model.showCompletedTaskList();
        return new CommandResult(MESSAGE_SUCCESS, MESSAGE_SUCCESS_STATUS_BAR);
    }
}
```
###### /java/seedu/today/logic/commands/NotDoneCommand.java
``` java
/**
 * Indicates an existing task is not done in the task manager.
 */
public class NotDoneCommand extends Command {

    public static final String COMMAND_WORD = "notdone";

    public static final String MESSAGE_USAGE = COMMAND_WORD + ": Indicates that the task identified is not done"
            + "by the index number used in the last task listing.\n"
            + "Parameters: INDEX (must be a positive integer) \n" + "Example: " + COMMAND_WORD + " 1";

    public static final String MESSAGE_NOTDONE_TASK_SUCCESS = "Task Not Done: %1$s";
    public static final String MESSAGE_SUCCESS_STATUS_BAR = "Task marked as not done";

    private final int filteredTaskListIndex;

    /**
     * @param filteredTaskListIndex
     *            the index of the task in the filtered task list to edit
     */
    public NotDoneCommand(int filteredTaskListIndex) {
        assert filteredTaskListIndex > 0;
        // converts filteredTaskListIndex from one-based to zero-based.
        this.filteredTaskListIndex = filteredTaskListIndex - 1;
    }

    @Override
    public CommandResult execute() throws CommandException {
        List<ReadOnlyTask> lastShownList = model.getFilteredTaskList();

        if (filteredTaskListIndex >= lastShownList.size()) {
            throw new CommandException(Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);
        }

        ReadOnlyTask taskToNotDone = lastShownList.get(filteredTaskListIndex);

        try {
            Task notDoneTask = createDoneTask(taskToNotDone);
            model.updateTask(filteredTaskListIndex, notDoneTask);
            model.updateFilteredListToShowAll();
            return new CommandResult(String.format(MESSAGE_NOTDONE_TASK_SUCCESS, notDoneTask),
                    MESSAGE_SUCCESS_STATUS_BAR);
        } catch (UniqueTaskList.DuplicateTaskException dpe) {
            throw new CommandException(EditCommand.MESSAGE_DUPLICATE_TASK);
        } catch (IllegalValueException e) {
            // Should not Happen
            throw new CommandException(e.getMessage());
        }

    }

    /**
     * Creates and returns a {@code Task} that is not done
     *
     * @throws IllegalValueException
     */
    private static Task createDoneTask(ReadOnlyTask taskToNotDone) throws IllegalValueException {
        assert taskToNotDone != null;

        boolean updatedDone = false;
        return Task.createTask(taskToNotDone.getName(), taskToNotDone.getTags(), taskToNotDone.getDeadline(),
                taskToNotDone.getStartingTime(), updatedDone, taskToNotDone.isManualToday());
    }
}
```
###### /java/seedu/today/logic/commands/NotTodayCommand.java
``` java
/**
 * Indicates an existing task does not need to be done today in the task
 * manager. In other words, move it out of the Today list but only if it isn't
 * due today.
 */
public class NotTodayCommand extends Command {

    public static final String COMMAND_WORD = "nottoday";

    public static final String MESSAGE_USAGE = COMMAND_WORD + ": Indicates that the task identified"
            + "by the index number used in the last task listing does not need to be done today.\n"
            + "Parameters: INDEX (must be a positive integer) \n" + "Example: " + COMMAND_WORD + " 1";

    public static final String MESSAGE_NOTTODAY_TASK_SUCCESS = "Task not for Today: %1$s";

    private final int filteredTaskListIndex;

    /**
     * @param filteredTaskListIndex
     *            the index of the task in the filtered task list to edit
     */
    public NotTodayCommand(int filteredTaskListIndex) {
        assert filteredTaskListIndex > 0;
        // converts filteredTaskListIndex from one-based to zero-based.
        this.filteredTaskListIndex = filteredTaskListIndex - 1;
    }

    @Override
    public CommandResult execute() throws CommandException {
        List<ReadOnlyTask> lastShownList = model.getFilteredTaskList();

        if (filteredTaskListIndex >= lastShownList.size()) {
            throw new CommandException(Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);
        }

        ReadOnlyTask taskToNotToday = lastShownList.get(filteredTaskListIndex);
        try {
            Task todayTask = createNotTodayTask(taskToNotToday);
            model.updateTask(filteredTaskListIndex, todayTask);
            model.updateFilteredListToShowAll();
            return new CommandResult(String.format(MESSAGE_NOTTODAY_TASK_SUCCESS, todayTask),
                    String.format(MESSAGE_NOTTODAY_TASK_SUCCESS, todayTask.getID()));
        } catch (UniqueTaskList.DuplicateTaskException dpe) {
            throw new CommandException(EditCommand.MESSAGE_DUPLICATE_TASK);
        } catch (IllegalValueException e) {
            // Should not Happen
            throw new CommandException(e.getMessage());
        }

    }

    /**
     * Creates and returns a {@code Task} that should be done today
     *
     * @throws IllegalValueException
     */
    private static Task createNotTodayTask(ReadOnlyTask taskToNotToday) throws IllegalValueException {
        assert taskToNotToday != null;

        boolean updatedToday = false;
        return Task.createTask(taskToNotToday.getName(), taskToNotToday.getTags(), taskToNotToday.getDeadline(),
                taskToNotToday.getStartingTime(), taskToNotToday.isDone(), updatedToday);
    }
}
```
###### /java/seedu/today/logic/commands/RenameTagCommand.java
``` java
/**
 * Renames an existing tag in the task manager.
 */
public class RenameTagCommand extends Command {

    public static final String COMMAND_WORD = "renametag";

    public static final String MESSAGE_USAGE = COMMAND_WORD + ": Renames an existing tag in the task manager "
            + "Parameters: <tag_name> <new_tag_name>\n" + "Example: " + COMMAND_WORD + " parttime fulltime";

    public static final String MESSAGE_RENAME_TAG_SUCCESS = "Renamed Tag: %1$s to %2$s";
    public static final String MESSAGE_SUCCESS_STATUS_BAR = "Tag renamed successfully.";

    private final Tag oldTag;
    private final Tag newTag;

    /**
     * @param oldTagName
     *            is the name of the tag that will be renamed
     * @param newTagName
     *            is the name of the replacement tag
     */
    public RenameTagCommand(String oldTagName, String newTagName) throws IllegalValueException {
        assert oldTagName != null;
        assert newTagName != null;

        this.oldTag = new Tag(oldTagName);
        this.newTag = new Tag(newTagName);
    }

    @Override
    public CommandResult execute() throws CommandException {
        model.updateFilteredListToShowAll();
        List<ReadOnlyTask> lastShownList = model.getFilteredTaskList();

        for (int index = 0; index < lastShownList.size(); index++) {
            renameTagInTask(lastShownList, index);
        }

        return new CommandResult(String.format(MESSAGE_RENAME_TAG_SUCCESS, oldTag.getTagName(), newTag.getTagName()),
                MESSAGE_SUCCESS_STATUS_BAR);
    }

    /**
     * Takes a task from the list, replace the designated tags, and updates it
     * to model
     * 
     * @param lastShownList
     *            list from model
     * @param index
     *            index of task in model
     * @throws CommandException
     */
    private void renameTagInTask(List<ReadOnlyTask> lastShownList, int index) throws CommandException {
        ReadOnlyTask taskToEdit = lastShownList.get(index);
        boolean containsOldTag = false;
        Set<Tag> newTagList = new HashSet<Tag>();
        Set<Tag> tags = taskToEdit.getTags().toSet();
        for (Tag tag : tags) {
            if (tag.getTagName().equals(oldTag.getTagName())) {
                containsOldTag = true;
                newTagList.add(newTag);
            } else {
                newTagList.add(tag);
            }
        }

        if (containsOldTag) {
            try {
                Task newTask = Task.createTask(taskToEdit.getName(), new UniqueTagList(newTagList),
                        taskToEdit.getDeadline(), taskToEdit.getStartingTime(), taskToEdit.isDone(),
                        taskToEdit.isManualToday());
                model.updateTask(index, newTask);
            } catch (UniqueTaskList.DuplicateTaskException dpe) {
                throw new CommandException(EditCommand.MESSAGE_DUPLICATE_TASK);
            } catch (IllegalValueException e) {
                // Should not happen
                throw new CommandException(e.getMessage());
            }
        }
    }
}
```
###### /java/seedu/today/logic/commands/TodayCommand.java
``` java
/**
 * Indicates an existing task should be done today in the task manager. In other
 * words, place it in the Today list.
 */
public class TodayCommand extends Command {

    public static final String COMMAND_WORD = "today";

    public static final String MESSAGE_USAGE = COMMAND_WORD + ": Indicates that the task identified"
            + "by the index number used in the last task listing should be done today.\n"
            + "Parameters: INDEX (must be a positive integer) \n" + "Example: " + COMMAND_WORD + " 1";

    public static final String MESSAGE_TODAY_TASK_SUCCESS = "Task for Today: %1$s";
    public static final String MESSAGE_SUCCESS_STATUS_BAR = MESSAGE_TODAY_TASK_SUCCESS;

    private final int filteredTaskListIndex;

    /**
     * @param filteredTaskListIndex
     *            the index of the task in the filtered task list to edit
     */
    public TodayCommand(int filteredTaskListIndex) {
        assert filteredTaskListIndex > 0;
        // converts filteredTaskListIndex from one-based to zero-based.
        this.filteredTaskListIndex = filteredTaskListIndex - 1;
    }

    @Override
    public CommandResult execute() throws CommandException {
        List<ReadOnlyTask> lastShownList = model.getFilteredTaskList();

        if (filteredTaskListIndex >= lastShownList.size()) {
            throw new CommandException(Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);
        }

        ReadOnlyTask taskToToday = lastShownList.get(filteredTaskListIndex);
        try {
            Task todayTask = createTodayTask(taskToToday);
            todayTask.setAnimation(2);
            model.updateTask(filteredTaskListIndex, todayTask);
            model.updateFilteredListToShowAll();
            return new CommandResult(String.format(MESSAGE_TODAY_TASK_SUCCESS, todayTask),
                    String.format(MESSAGE_TODAY_TASK_SUCCESS, todayTask.getID()));
        } catch (UniqueTaskList.DuplicateTaskException dpe) {
            throw new CommandException(EditCommand.MESSAGE_DUPLICATE_TASK);
        } catch (IllegalValueException e) {
            // Should not Happen
            throw new CommandException(e.getMessage());
        }

    }

    /**
     * Creates and returns a {@code Task} that should be done today
     *
     * @throws IllegalValueException
     */
    private static Task createTodayTask(ReadOnlyTask taskToToday) throws IllegalValueException {
        assert taskToToday != null;

        boolean updatedToday = true;
        return Task.createTask(taskToToday.getName(), taskToToday.getTags(), taskToToday.getDeadline(),
                taskToToday.getStartingTime(), taskToToday.isDone(), updatedToday);
    }
}
```
###### /java/seedu/today/logic/parser/DeleteTagCommandParser.java
``` java
/**
 * Parses input arguments and creates a new DeleteTagCommand object
 */
public class DeleteTagCommandParser {

    private static final int TAG_INDEX = 0;
    private static final int NUM_ARGUMENTS = 1;

    /**
     * Parses the given {@code String} of arguments in the context of the
     * DeleteTagCommand and returns an DeleteTagCommand object for execution.
     */
    public Command parse(String args) {
        String[] tagNames = args.trim().split(" ");
        try {
            if (tagNames.length != NUM_ARGUMENTS || tagNames[TAG_INDEX].equals("")) {
                // TODO: Name this exception, unchecked
                throw new Exception(MESSAGE_INVALID_COMMAND_FORMAT);
            }
            return new DeleteTagCommand(tagNames[TAG_INDEX]);
        } catch (IllegalValueException ive) {
            return new IncorrectCommand(ive.getMessage());
        } catch (Exception e) {
            return new IncorrectCommand(e.getMessage());
        }
    }
}
```
###### /java/seedu/today/logic/parser/DoneCommandParser.java
``` java
/**
 * Parses input arguments and creates a new DoneCommand object
 */
public class DoneCommandParser {

    /**
     * Parses the given {@code String} of arguments in the context of the
     * DoneCommand and returns an DoneCommand object for execution.
     */
    public Command parse(String args, Logic logic) {
        if (!logic.isValidUIIndex(args)) {
            return new IncorrectCommand(Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);
        }

        return new DoneCommand(logic.parseUIIndex(args));
    }

}
```
###### /java/seedu/today/logic/parser/NotDoneCommandParser.java
``` java
/**
 * Parses input arguments and creates a new NotDoneCommand object
 */
public class NotDoneCommandParser {

    /**
     * Parses the given {@code String} of arguments in the context of the
     * NotDoneCommand and returns an NotDoneCommand object for execution.
     */
    public Command parse(String args, Logic logic) {
        if (!logic.isValidUIIndex(args)) {
            return new IncorrectCommand(Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);
        }

        return new NotDoneCommand(logic.parseUIIndex(args));
    }

}
```
###### /java/seedu/today/logic/parser/RenameTagCommandParser.java
``` java
/**
 * Parses input arguments and creates a new RenameTagCommand object
 */
public class RenameTagCommandParser {

    private static final int OLDTAG_INDEX = 0;
    private static final int NEWTAG_INDEX = 1;
    private static final int NUM_ARGUMENTS = 2;

    /**
     * Parses the given {@code String} of arguments in the context of the
     * RenameTagCommand and returns an RenameTagCommand object for execution.
     */
    public Command parse(String args) {
        String[] tagNames = args.trim().split(" ");
        try {
            if (tagNames.length != NUM_ARGUMENTS) {
                return new IncorrectCommand(MESSAGE_INVALID_COMMAND_FORMAT);
            }
            return new RenameTagCommand(tagNames[OLDTAG_INDEX], tagNames[NEWTAG_INDEX]);
        } catch (IllegalValueException ive) {
            return new IncorrectCommand(ive.getMessage());
        }
    }
}
```
###### /java/seedu/today/model/ModelManager.java
``` java
    public Predicate<ReadOnlyTask> isDueOnThisDate(Date date) {
        assert date != null : "no date provided for a deadline search";
        return t -> {
            if (t.getDeadline().isPresent()) {
                return t.getDeadline().get().isSameDay(date);
            }
            return false;
        };
    }
}
```
###### /java/seedu/today/model/tag/UniqueTagList.java
``` java
    /**
     * Clears all the tag in the list.
     */
    public void clear() {
        internalList.clear();
    }

```
###### /java/seedu/today/model/task/DateTime.java
``` java
    /**
     * Check if same day
     *
     * @param date
     *            the other date
     * @return whether it is the same day
     */
    public boolean isSameDay(Date date) {
        Calendar cal1 = Calendar.getInstance();
        Calendar cal2 = Calendar.getInstance();
        cal1.setTime(date);
        cal2.setTime(dateTime.getReference());
        return cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) && cal1
                .get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR);
    }

    @Override
    public int compareTo(DateTime o) {
        return this.getDate().compareTo(o.getDate());
    }
}
```
###### /java/seedu/today/model/task/DeadlineTask.java
``` java
    @Override
    public String getTaskAbsoluteDateTime() {
        SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
        return "Due: " + dateFormat.format(deadline.getDate());
    }
```
###### /java/seedu/today/model/task/EventTask.java
``` java
    @Override
    public boolean isToday() {
        SimpleDateFormat fmt = new SimpleDateFormat("yyyyMMdd");
        Date timeNow = new Date();
        boolean startToday = fmt.format(this.startingTime.getDate()).equals(fmt.format(timeNow));
        boolean withinStartAndEnd = startingTime.getDate().compareTo(timeNow) <= 0
                && deadline.getDate().compareTo(timeNow) >= 0;
        return isManualToday() || startToday || withinStartAndEnd || isOverdue();
    }
```
###### /java/seedu/today/model/task/FloatingTask.java
``` java
    @Override
    public Optional<DateTime> getDeadline() {
        return Optional.empty();
    }

```
###### /java/seedu/today/model/task/ReadOnlyTask.java
``` java
    /**
     * Returns true if both have the same state. (interfaces cannot override
     * .equals)
     * 
     * @return whether two tasks are the same name, deadline, and start time
     */
    default boolean isSameStateAs(ReadOnlyTask other) {
        assert other != null;
        return other == this // short circuit if same object
                || (other.compareTo(this) == 0 && other.getName().equals(this.getName()));
    }

    /**
     * Formats the task as text, showing all contact details.
     * 
     * @return full text representation of task
     */
    default String getAsText() {
        final StringBuilder builder = new StringBuilder();
        builder.append(getName()).append(" Tags: ");
        getTags().forEach(builder::append);
        builder.append(" Done: ").append(isDone());
        return builder.toString();
    }

    /**
     * Used for sorting tasks in lists
     */
    @Override
    public default int compareTo(ReadOnlyTask other) {
        DateTime minDateTime = new DateTime(new Date(Long.MIN_VALUE));
        int compareEnd = this.getDeadline().orElse(minDateTime).compareTo(other.getDeadline().orElse(minDateTime));
        int compareStart = this.getStartingTime().orElse(minDateTime)
                .compareTo(other.getStartingTime().orElse(minDateTime));
        if (this.isOverdue() && !other.isOverdue()) {
            return -1;
        } else if (!this.isOverdue() && other.isOverdue()) {
            return 1;
        } else if (compareEnd != 0) {
            return compareEnd;
        } else {
            return compareStart;
        }
    }
}
```
###### /java/seedu/today/model/task/Task.java
``` java
    /**
     * Selecting the Task to construct based on what dates is available
     */
    public static Task createTask(Name name, UniqueTagList tags, Optional<DateTime> deadline,
            Optional<DateTime> startingTime, boolean done, boolean manualToday) throws IllegalValueException {
        if (!deadline.isPresent() && !startingTime.isPresent()) {
            return new FloatingTask(name, tags, done, manualToday);
        } else if (deadline.isPresent() && !startingTime.isPresent()) {
            return new DeadlineTask(name, tags, deadline.get().getDate(), done, manualToday);
        } else if (deadline.isPresent() && startingTime.isPresent()) {
            return new EventTask(name, tags, deadline.get().getDate(), startingTime.get().getDate(), done, manualToday);
        } else {
            throw new IllegalValueException(ONLY_STARTING_DATE_AVAILABLE_ERROR);
        }
    }

    /**
     * Selecting the Task to construct from a ReadOnlyTask
     */
    public static Task createTask(ReadOnlyTask readOnlyTask) throws IllegalValueException {
        return createTask(readOnlyTask.getName(), readOnlyTask.getTags(), readOnlyTask.getDeadline(),
                readOnlyTask.getStartingTime(), readOnlyTask.isDone(), readOnlyTask.isManualToday());
    }

```
###### /java/seedu/today/model/TaskManager.java
``` java
    /**
     * After a tag is no longer found is in any task, ensure that it is removed
     * from the master tag list {@link #tags} - points to a Tag object in the
     * master list
     */
    private void refreshMasterTagList() {
        tags.clear();
        for (Task task : tasks) {
            for (Tag tag : task.getTags()) {
                try {
                    tags.add(tag);
                } catch (DuplicateTagException e) {
                    continue;
                }
            }
        }
    }

```
###### /java/seedu/today/storage/XmlAdaptedTask.java
``` java
    /**
     * Converts this jaxb-friendly adapted task object into the model's Task
     * object.
     *
     * @throws IllegalValueException
     *             if there were any data constraints violated in the adapted
     *             task
     */
    public Task toModelType() throws IllegalValueException {

        final Name name = new Name(this.name);
        final List<Tag> taskTags = new ArrayList<>();
        for (XmlAdaptedTag tag : tagged) {
            taskTags.add(tag.toModelType());
        }
        final UniqueTagList tags = new UniqueTagList(taskTags);

        Optional<DateTime> deadline = Optional.empty();
        Optional<DateTime> startingTime = Optional.empty();
        if (this.deadline != null) {
            deadline = Optional.of(new DateTime(new Date(Long.parseLong(this.deadline))));
        }
        if (this.startingTime != null) {
            startingTime = Optional.of(new DateTime(new Date(Long.parseLong(this.startingTime))));
        }

        return Task.createTask(name, tags, deadline, startingTime, done, manualToday);
    }
}
```
