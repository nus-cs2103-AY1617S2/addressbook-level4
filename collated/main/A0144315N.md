# A0144315N
###### /resources/view/CommandBox.fxml
``` fxml
<AnchorPane maxHeight="100.0" prefHeight="70.0" prefWidth="100.0" styleClass="anchor-pane" xmlns="http://javafx.com/javafx/8.0.111" xmlns:fx="http://javafx.com/fxml/1">
   <VBox prefHeight="50.0" prefWidth="100.0" spacing="10.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      <children>
         <JFXTextField fx:id="commandTextFieldOld" maxHeight="30.0" minHeight="30.0" onAction="#handleCommandInputChanged" prefHeight="30.0" prefWidth="100.0" promptText="&gt; What to do today?" style="-fx-padding: 10;" VBox.vgrow="NEVER" />
         <Label text="message">
            <VBox.margin>
               <Insets bottom="20.0" />
            </VBox.margin></Label>
      </children>
      <padding>
         <Insets bottom="20.0" top="30.0" />
      </padding>
   </VBox>
</AnchorPane>
```
###### /resources/view/CompletedTaskListPanel.fxml
``` fxml

<AnchorPane stylesheets="@Extensions.css" xmlns="http://javafx.com/javafx/8.0.111" xmlns:fx="http://javafx.com/fxml/1">
   <children>
      <TitledPane fx:id="completedTaskListTitle" animated="false" prefWidth="550.0" text="Completed" visible="false">
         <content>
            <ListView fx:id="completedTaskListView" opacity="0.0" prefHeight="0.0" prefWidth="450.0" />
         </content>
      </TitledPane>
   </children>
</AnchorPane>
```
###### /resources/view/TaskListPanel.fxml
``` fxml
<ScrollPane fx:id="scrollPane" fitToWidth="true" stylesheets="@Extensions.css" xmlns="http://javafx.com/javafx/8.0.111" xmlns:fx="http://javafx.com/fxml/1">
  <content>
	<VBox prefWidth="550.0">
	      <children>
	      	<AnchorPane>

	          <TitledPane fx:id="todayTaskListPanel" animated="false" prefWidth="550.0" text="Today" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
	               <content>
	            		    <ListView fx:id="todayTaskListView" prefHeight="1000.0" prefWidth="550.0" />
	               </content>
	            </TitledPane>
	        </AnchorPane>
	        <AnchorPane>
	          <TitledPane fx:id="futureTaskListPanel" animated="false" prefWidth="550.0" text="Future" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
	               <content>
			              	<ListView fx:id="futureTaskListView" prefHeight="1000.0" prefWidth="550.0" />
	               </content>
	            </TitledPane>
            </AnchorPane>
		</children>
	</VBox>
  </content>
</ScrollPane>
```
###### /resources/view/TaskListCard.fxml
``` fxml
<AnchorPane fx:id="cardCell" prefHeight="40.0" prefWidth="500.0" xmlns="http://javafx.com/javafx/8.0.111" xmlns:fx="http://javafx.com/fxml/1">
    <children>
      <HBox fx:id="cardPane" prefHeight="100.0" prefWidth="200.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
         <children>
                     <Label fx:id="id" prefHeight="35.0" prefWidth="44.0" styleClass="cell_big_label" text="ID" textFill="#389ba4" HBox.hgrow="NEVER">
               <font>
                  <Font name="Helvetica Light" size="22.0" />
               </font>
               <HBox.margin>
                  <Insets left="15.0" top="-4.0" />
               </HBox.margin>
            </Label>
            <VBox prefHeight="36.0" prefWidth="198.0" HBox.hgrow="ALWAYS">
               <children>
                           <Label fx:id="name" prefHeight="25.0" prefWidth="500.0" styleClass="cell_big_label" text="TaskTitle" textFill="#105b63">
                     <font>
                        <Font name="Helvetica" size="20.0" />
                     </font>
                     <VBox.margin>
                        <Insets left="10.0" />
                     </VBox.margin>
                  </Label>
                        <FlowPane fx:id="tags" prefHeight="11.0" prefWidth="200.0">
                     <VBox.margin>
                        <Insets left="12.0" />
                     </VBox.margin>
                  </FlowPane>
               </children>
            </VBox>
            <Label fx:id="taskDate" prefHeight="40.0" prefWidth="200.0" text="taskDate" textAlignment="RIGHT" textFill="#757575">
               <font>
                  <Font name="Helvetica" size="12.0" />
               </font>
               <HBox.margin>
                  <Insets top="-3.0" />
               </HBox.margin>
            </Label>
         </children>
      </HBox>
      <JFXProgressBar fx:id="progressBar" prefHeight="0.0" prefWidth="503.0" visible="false" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" />
      <JFXProgressBar fx:id="overdueBar" prefWidth="550.0" styleClass="jfx-progress-bar" visible="false" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" />
    </children>
</AnchorPane>
```
###### /resources/view/StatusBarFooter.fxml
``` fxml
<GridPane styleClass="grid-pane" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" stylesheets="@DarkTheme.css">
<columnConstraints>
  <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
  <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
</columnConstraints>
 <children>
      <StatusBar styleClass="anchor-pane" fx:id="syncStatus" minWidth="0.0"/>
 </children>
</GridPane>
```
###### /resources/view/MainWindow.fxml
``` fxml

<BorderPane maxHeight="650.0" maxWidth="550.0" minHeight="650.0" minWidth="550.0" style="-fx-background-color: #ffffff;" stylesheets="@Today.css" xmlns="http://javafx.com/javafx/8.0.111" xmlns:fx="http://javafx.com/fxml/1">
   <top>
      <HBox fx:id="windowTop" prefHeight="100.0" prefWidth="550.0" BorderPane.alignment="CENTER">
         <children>
            <Label maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="55.0" prefWidth="166.0" text="TODAY" textFill="#db9e36">
               <font>
                  <Font name="Helvetica Light" size="45.0" />
               </font>
               <HBox.margin>
                  <Insets left="20.0" top="30.0" />
               </HBox.margin>
            </Label>
            <VBox maxWidth="-Infinity" minWidth="-Infinity" prefHeight="200.0" prefWidth="100.0">
               <children>
                  <Label fx:id="titleDate" text="Date" textFill="#105b63">
                     <VBox.margin>
                        <Insets top="38.0" />
                     </VBox.margin>
                     <font>
                        <Font name="Helvetica Light" size="13.0" />
                     </font>
                  </Label>
                  <Label fx:id="titleDay" text="Day" textFill="#105b63">
                     <VBox.margin>
                        <Insets />
                     </VBox.margin>
                     <font>
                        <Font name="Helvetica Light" size="13.0" />
                     </font>
                  </Label>
               </children>
            </VBox>
            <VBox prefHeight="100.0" prefWidth="279.0" HBox.hgrow="ALWAYS">
               <children>
                  <JFXTextField fx:id="commandTextField" onAction="#handleCommandInputChanged" prefHeight="40.0" prefWidth="244.0" promptText="&gt; Enter Command">
                     <VBox.margin>
                        <Insets top="40.0" />
                     </VBox.margin>
                  </JFXTextField>
                  <AnchorPane fx:id="commandBoxPlaceholder" maxHeight="105.0" prefHeight="50.0" prefWidth="279.0">
                     </AnchorPane>
               </children>
               <HBox.margin>
                  <Insets right="20.0" />
               </HBox.margin>
            </VBox>
         </children>
      </HBox>
   </top>
   <center>
      <AnchorPane fx:id="windowCentre" prefHeight="550.0" prefWidth="550.0" BorderPane.alignment="CENTER">
         <children>
            <VBox layoutX="33.0" layoutY="-4.0" maxWidth="550.0" minWidth="550.0" prefHeight="550.0" prefWidth="550.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
               <children>
                  <AnchorPane fx:id="taskListPanelPlaceholder" prefWidth="550.0" />
               </children>
            </VBox>
            <AnchorPane fx:id="completedTaskListPlaceholder" prefHeight="0.0" prefWidth="550.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" />
         </children>
         <BorderPane.margin>
            <Insets left="15.0" right="15.0" />
         </BorderPane.margin>
      </AnchorPane>
   </center>
   <bottom>
      <AnchorPane prefHeight="29.0" prefWidth="550.0" BorderPane.alignment="CENTER">
         <children>
            <AnchorPane fx:id="commandBoxPlaceholderOld" maxHeight="0.0" maxWidth="0.0" minHeight="0.0" minWidth="0.0" prefHeight="0.0" prefWidth="0.0" styleClass="anchor-pane-with-border">
               <padding>
                  <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
               </padding>
            </AnchorPane>
            <AnchorPane fx:id="resultDisplayPlaceholder" maxHeight="0.0" maxWidth="0.0" minHeight="0.0" minWidth="0.0" prefHeight="0.0" prefWidth="0.0" styleClass="anchor-pane-with-border" AnchorPane.bottomAnchor="0.0">
           		<padding>
               		<Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
           		</padding>
       		</AnchorPane>
            <AnchorPane fx:id="statusbarPlaceholder" prefHeight="30.0" prefWidth="550.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" />
         </children>
      </AnchorPane>
   </bottom>
</BorderPane>
```
###### /resources/view/Today.css
``` css
.list-cell{
	-fx-accent: #C1F0F6;
	-fx-focus-color: #C1F0F6;
}


.list-cell:empty {
    -fx-opacity: 0;
}

.jfx-snackbar-content {
	-fx-background-color:#7194B2;
}

.jfx-snackbar-toast {
	-fx-text-fill:#ffffff;
}

.jfx-progress-bar{
	-fx-progress-color: #CE2345;
	-fx-stroke-width:3;
}

.jfx-text-field:error{
	-jfx-focus-color: #D34336;
	-jfx-unfocus-color: #D34336;
}

.jfx-text-field .error-label{
	-fx-text-fill : #D34336;
	-fx-font-size: 0.75em;
}
.jfx-text-field .error-icon{
	-fx-text-fill : #D34336;
	-fx-font-size: 1em;
}
```
###### /java/seedu/today/logic/commands/CommandResult.java
``` java
public class CommandResult {

    private final String feedbackToUser;
    private final String statusBarMessage;

    public CommandResult(String feedbackToUser, String statusBarMessage) {
        assert feedbackToUser != null;
        this.feedbackToUser = feedbackToUser;
        this.statusBarMessage = statusBarMessage;
    }

    public String getFeedbackToUser() {
        return feedbackToUser;
    }

    public String getStatusBarMessage() {
        return statusBarMessage;
    }
}
```
###### /java/seedu/today/commons/events/ui/UpdateStatusBarEvent.java
``` java
    public UpdateStatusBarEvent(String message) {
        this.message = message;
    }

    public String getMessage() {
        return this.message;
    }

    @Override
    public String toString() {
        return "[UpdateStatusBarEvent]" + message;
    }
}
```
###### /java/seedu/today/ui/TaskListPanel.java
``` java
    public TaskListPanel(AnchorPane taskListPlaceholder, ObservableList<ReadOnlyTask> taskListToday,
            ObservableList<ReadOnlyTask> taskListFuture) {
        super(FXML);
        this.taskListToday = taskListToday;
        this.taskListFuture = taskListFuture;
        setConnections(todayTaskListView, taskListToday);
        setConnections(futureTaskListView, taskListFuture);
        // todayTaskListView.setExpanded(true);
        addToPlaceholder(taskListPlaceholder);
        // set ListView height, add 3 extra px to show border
        updateListHeight();
    }

    /**
     * scrolls the list to place the animated task card at top
     */
    public void scrollTo() {
        for (ReadOnlyTask task : taskListToday) {
            if (task.isAnimated()) {
                scrollToToday(taskListToday.indexOf(task));
            }
        }
        for (ReadOnlyTask task : taskListFuture) {
            if (task.isAnimated()) {
                scrollToToday(taskListFuture.indexOf(task));
            }
        }
    }

    /**
     * Set the height of task lists based on the number of tasks they contains.
     */
    public void updateListHeight() {
        todayTaskListView.setPrefHeight(taskListToday.size() * rowHeight + rowPadding);
        futureTaskListView.setPrefHeight(taskListFuture.size() * rowHeight + rowPadding);
    }

    private void setConnections(ListView<ReadOnlyTask> taskListView, ObservableList<ReadOnlyTask> taskList) {
        taskListView.setItems(taskList);
        taskListView.setCellFactory(listView -> new TaskListViewCell());
        setEventHandlerForSelectionChangeEvent(taskListView);
    }

```
###### /java/seedu/today/ui/util/CommandTextFieldValidator.java
``` java
public class CommandTextFieldValidator extends ValidatorBase {
    private boolean isErrorMessageShown;

    public CommandTextFieldValidator() {
        super();
        this.isErrorMessageShown = false;
    }

    /**
     * Implements parent class's abstract method.
     * It refreshes the commandBox error message when called.
     */
    @Override
    protected void eval() {
        return;
    }

    /**
     * displays error message under command box
     * Notice: need to call the corresponding JFXTextField's validate() method to update the UI
     */
    public void showErrorMessage() {
        hasErrors.set(true);
        isErrorMessageShown = true;
    }

    public void hideErrorMessage() {
        hasErrors.set(false);
        isErrorMessageShown = false;
    }
}
```
###### /java/seedu/today/ui/CompletedTaskListPanel.java
``` java
    public CompletedTaskListPanel(AnchorPane completedTaskListPlaceholder, ObservableList<ReadOnlyTask> taskList) {
        super(FXML);
        setConnections(taskList);
        addToPlaceholder(completedTaskListPlaceholder);
        registerAsAnEventHandler(this);
        completedTaskListView.toFront();
    }

    private void setConnections(ObservableList<ReadOnlyTask> taskList) {
        completedTaskListView.setItems(taskList);
        completedTaskListView.setCellFactory(listView -> new TaskListViewCell());
        setEventHandlerForSelectionChangeEvent();
    }

```
###### /java/seedu/today/ui/CompletedTaskListPanel.java
``` java
    public void display(boolean show) {
        if (show) {
            // show completed task list panel
            completedTaskListView.setPrefHeight(0.0d);
            flag = true;

            Timeline timeline = new Timeline();
            timeline.getKeyFrames()
                    .addAll(new KeyFrame(Duration.ZERO, new KeyValue(completedTaskListView.prefHeightProperty(), 0),
                            new KeyValue(completedTaskListTitle.visibleProperty(), false),
                            new KeyValue(completedTaskListView.opacityProperty(), 0.8d)),
                            new KeyFrame(Duration.millis(300.0d),
                                    new KeyValue(completedTaskListView.prefHeightProperty(), completedPanelHeight),
                                    new KeyValue(completedTaskListTitle.visibleProperty(), true),
                                    new KeyValue(completedTaskListView.opacityProperty(), 1)));
            timeline.play();
        } else {
            // collapse
            Timeline timeline = new Timeline();
            timeline.getKeyFrames()
                    .addAll(new KeyFrame(Duration.ZERO,
                            new KeyValue(completedTaskListView.prefHeightProperty(), completedPanelHeight),
                            new KeyValue(completedTaskListTitle.visibleProperty(), true),
                            new KeyValue(completedTaskListView.opacityProperty(), 1)),
                            new KeyFrame(Duration.millis(200.0d),
                                    new KeyValue(completedTaskListView.opacityProperty(), 0.8d)),
                            new KeyFrame(Duration.millis(300.0d),
                                    new KeyValue(completedTaskListView.prefHeightProperty(), 0),
                                    new KeyValue(completedTaskListTitle.visibleProperty(), false),
                                    new KeyValue(completedTaskListView.opacityProperty(), 0)));
            timeline.play();
            flag = false;
        }
    }

    @Subscribe
    private void handleShowCompletedTasksEvent(ShowCompletedTaskEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        if (event.action == ShowCompletedTaskEvent.Action.SHOW && !flag) {
            display(true);
        } else if (event.action == ShowCompletedTaskEvent.Action.HIDE && flag) {
            display(false);
        } else if (event.action == ShowCompletedTaskEvent.Action.TOGGLE) {
            display(!flag);
        }
    }
}
```
###### /java/seedu/today/ui/TaskCard.java
``` java
    public TaskCard(ReadOnlyTask task, String displayedIndex) {
        super(FXML);
        name.setText(task.getName().toString());
        id.setText(displayedIndex + "");
        taskDate.setText(task.getTaskAbsoluteDateTime());
        initTags(task);
        tags.setAlignment(Pos.CENTER_LEFT);
        taskDate.setAlignment(Pos.BASELINE_RIGHT);
        progressBar.setVisible(task.isAnimated());
        logger.info("############################################TASK ISANIMATED:" + task.isAnimated());

        // Play progress bar animation
        if (task.getIsAnimated() == 1) {
            Timeline timeline = new Timeline(
                    new KeyFrame(Duration.ZERO, new KeyValue(progressBar.progressProperty(), 0)),
                    new KeyFrame(Duration.seconds(1), new KeyValue(progressBar.progressProperty(), 1)));
            timeline.setCycleCount(1);
            timeline.play();
            task.setAnimation(0);
            // Scroll to the card
            raise(new JumpToListRequestEvent(task.getID()));
        } else if (task.getIsAnimated() > 1) {
            task.setAnimation(task.getIsAnimated() - 1);
        }

        // Change to Red if overdue(excluding those in the completed list)
        if (task.isOverdue() && !task.isDone()) {
            cardCell.setStyle("-fx-background-color: #ffdbe0;");
        }
    }

    private void initTags(ReadOnlyTask task) {
        task.getTags().forEach(tag -> tags.getChildren().add(new Label(tag.getTagName())));
    }
}
```
###### /java/seedu/today/ui/MainWindow.java
``` java
    public MainWindow(Stage primaryStage, Config config, UserPrefs prefs, Logic logic) {
        super(FXML);

        // Set dependencies
        this.primaryStage = primaryStage;
        this.logic = logic;
        this.config = config;

        // Set date
        Calendar cal = Calendar.getInstance();
        this.titleDate.setText(new SimpleDateFormat("dd MMM").format(cal.getTime()));
        this.titleDay.setText(new SimpleDateFormat("EE").format(cal.getTime()));
        this.commandTextField.setLabelFloat(true);
        TextFields.bindAutoCompletion(commandTextField, "add", "clear", "delete", "deletetag", "done", "edit", "exit",
                "find", "help", "list", "listcompleted", "notdone", "redo", "renametag", "undo", "saveto", "today",
                NotTodayCommand.COMMAND_WORD, UseThisCommand.COMMAND_WORD);

        // Configure the UI
        setTitle(config.getAppTitle());
        setIcon(ICON);
        setWindowMinSize();
        setWindowDefaultSize(prefs);
        scene = new Scene(getRoot());
        primaryStage.setScene(scene);
        // prevent initialising style when stage is set to visible
        if (primaryStage.getStyle() != StageStyle.UNDECORATED) {
            primaryStage.initStyle(StageStyle.UNDECORATED);
        }
        primaryStage.setResizable(false);
        registerAsAnEventHandler(this);

        // Allows dragging the undecorated window around
        final Pair coordinate = new Pair();
        windowTop.setOnMousePressed(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent mouseEvent) {
                // record a delta distance for the drag and drop operation.
                coordinate.x = primaryStage.getX() - mouseEvent.getScreenX();
                coordinate.y = primaryStage.getY() - mouseEvent.getScreenY();
            }
        });

        windowTop.setOnMouseDragged(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent mouseEvent) {
                primaryStage.setX(mouseEvent.getScreenX() + coordinate.x);
                primaryStage.setY(mouseEvent.getScreenY() + coordinate.y);
            }
        });

        // set validator for commandTextField(to display error message under the
        // command box)
        validator = new CommandTextFieldValidator();
        validator.setMessage("");
        validator.setIcon(GlyphsBuilder.create(FontAwesomeIconView.class).glyph(FontAwesomeIcon.WARNING).size("1em")
                .styleClass("error").build());
        commandTextField.getValidators().add(validator);
    }

```
###### /java/seedu/today/ui/MainWindow.java
``` java
    /**
     * Initialises observable lists for ListView and loads other UI components
     */
    void fillInnerParts() {
        // Initialises observable lists for ListViews
        taskListToday = FXCollections.observableArrayList();
        taskListFuture = FXCollections.observableArrayList();
        taskListCompleted = FXCollections.observableArrayList();

        // Split and sort task lists (see Developer Guide "Implementation"
        // section for detail)
        prepareTaskList();

        // Load UI components
        taskListPanel = new TaskListPanel(getTaskListPlaceholder(), taskListToday, taskListFuture);
        new StatusBarFooter(getStatusbarPlaceholder(), config.getTaskManagerFilePath());
        new ResultDisplay(getResultDisplayPlaceholder());
        completedTaskListPanel = new CompletedTaskListPanel(getCompletedTaskListPlaceholder(), taskListCompleted);

        bindKeysToScene();
    }

    /**
     * Prepares categorised task list for today/future/completed ListView
     */
    public void prepareTaskList() {
        // Assume the three lists will always be initialised by fillInnerParts()
        assert taskListToday != null;
        assert taskListFuture != null;
        assert taskListCompleted != null;

        logic.prepareTaskList(taskListToday, taskListFuture, taskListCompleted);
    }

```
###### /java/seedu/today/ui/MainWindow.java
``` java
    /**
     * Handles command execution for commandTextField input
     */
    @FXML
    private void handleCommandInputChanged() {
        // Do nothing on empty command box
        if (commandTextField.getText().equals("")) {
            return;
        }

        validator.hideErrorMessage();
        commandTextField.validate();

        try {
            CommandResult commandResult = logic.execute(commandTextField.getText());
            // process result of the command
            commandTextField.setText("");
            raise(new NewResultAvailableEvent(commandResult.getFeedbackToUser()));
            raise(new UpdateStatusBarEvent(commandResult.getStatusBarMessage()));
        } catch (CommandException e) {
            // handle command failure
            // display error message under command box
            validator.setMessage(e.getMessage());
            validator.showErrorMessage();
            commandTextField.validate();
            raise(new NewResultAvailableEvent(e.getMessage()));
        }
    }

    /**
     * Displays a snack bar message at the bottom of the main window
     */
    @Subscribe
    public void handleUpdateStatusBarEvent(UpdateStatusBarEvent event) {
        JFXSnackbar toast = new JFXSnackbar(windowCentre);
        toast.show(event.getMessage(), 4000);
    }
}

// A coordinate pair class used to store mouse position
class Pair {
    public double x, y;
}
```
###### /java/seedu/today/model/ModelManager.java
``` java
    /**
     * Compares two ReadOnlyTask by deadline. Tasks without deadline will be
     * deemed as the smallest. If both tasks have deadline, the result will be
     * the difference in their UNIX time.
     */
    private static final Comparator<? super ReadOnlyTask> TaskDatetimeComparator = new Comparator<ReadOnlyTask>() {
        @Override
        public int compare(ReadOnlyTask o1, ReadOnlyTask o2) {
            return o1.compareTo(o2);
        }
    };

```
###### /java/seedu/today/model/ModelManager.java
``` java
    /**
     * Splits the filteredTaskList into three sublists every time before
     * refreshing the UI. The newly created sublists will be added to
     * corresponding observable lists at the end so as to force the UI to
     * refresh.
     *
     * @param taskListToday
     *            backing list for TodayTaskListView in UI
     * @param taskListFuture
     *            backing list for FutureTaskListView in UI
     * @param taskListCompeleted
     *            backing list for CompletedTaskListView in UI
     */
    @Override
    public void prepareTaskList(ObservableList<ReadOnlyTask> taskListToday, ObservableList<ReadOnlyTask> taskListFuture,
            ObservableList<ReadOnlyTask> taskListCompleted) {
        ObservableList<ReadOnlyTask> taskList = getFilteredTaskList();
        taskListToday.clear();
        taskListFuture.clear();
        taskListCompleted.clear();
        // All operations to be done in a temporary list to prevent
        // ObservableList from refreshing UI multiple times
        ArrayList<ReadOnlyTask> todayTempList = new ArrayList<ReadOnlyTask>();
        ArrayList<ReadOnlyTask> futureTempList = new ArrayList<ReadOnlyTask>();
        ArrayList<ReadOnlyTask> completedTempList = new ArrayList<ReadOnlyTask>();

        // split, sort and assign UI index to sub lists
        splitTaskList(taskList, todayTempList, futureTempList, completedTempList);
        sortTaskLists(todayTempList, futureTempList, completedTempList);
        assignUiIndex(todayTempList, futureTempList, completedTempList);

        // add local temporary lists back to ObservableList to update UI views
        taskListToday.addAll(todayTempList);
        taskListFuture.addAll(futureTempList);
        taskListCompleted.addAll(completedTempList);
    }

    /**
     * Splits the filteredTaskList into three sublists
     */
    private void splitTaskList(ObservableList<ReadOnlyTask> taskList, ArrayList<ReadOnlyTask> todayTempList,
            ArrayList<ReadOnlyTask> futureTempList, ArrayList<ReadOnlyTask> completedTempList) {
        ListIterator<ReadOnlyTask> iter = taskList.listIterator();
        while (iter.hasNext()) {
            ReadOnlyTask tmpTask = iter.next();
            // set task id to be displayed, the id here is 1-based
            if (tmpTask.isToday() && !tmpTask.isDone()) {
                // absolute index here will be replace to relative index in
                // assignUiIndex method
                tmpTask.setID("" + (iter.nextIndex() - 1));
                todayTempList.add(tmpTask);
            } else if (!tmpTask.isDone()) {
                tmpTask.setID("" + (iter.nextIndex() - 1));
                futureTempList.add(tmpTask);
            } else {
                tmpTask.setID("" + (iter.nextIndex() - 1));
                completedTempList.add(tmpTask);
            }
        }
    }

    /**
     * Sorts task lists by deadline. Floating tasks will appear before deadline
     * tasks.
     */
    private void sortTaskLists(ArrayList<ReadOnlyTask> todayTempList, ArrayList<ReadOnlyTask> futureTempList,
            ArrayList<ReadOnlyTask> completedTempList) {
        todayTempList.sort(TaskDatetimeComparator);
        futureTempList.sort(TaskDatetimeComparator);
        completedTempList.sort(TaskDatetimeComparator);
    }

    /**
     * Tranlates absolute index into relative Task ID and save it to task
     */
    private void assignUiIndex(ArrayList<ReadOnlyTask> taskListToday, ArrayList<ReadOnlyTask> taskListFuture,
            ArrayList<ReadOnlyTask> taskListCompleted) {
        // TODO potential performance bottleneck here
        indexMap.clear();
        // initialise displayed index
        int todayID = 1;
        int futureID = 1;
        int completedID = 1;
        ListIterator<ReadOnlyTask> iterToday = taskListToday.listIterator();
        ListIterator<ReadOnlyTask> iterFuture = taskListFuture.listIterator();
        ListIterator<ReadOnlyTask> iterCompleted = taskListCompleted.listIterator();
        while (iterToday.hasNext()) {
            ReadOnlyTask tmpTask = iterToday.next();
            indexMap.put("T" + todayID, Integer.valueOf(tmpTask.getID()));
            tmpTask.setID("T" + todayID);
            todayID++;
            logger.info(tmpTask.getAsText() + ">>> Assign ID:" + tmpTask.getID());
        }
        while (iterFuture.hasNext()) {
            ReadOnlyTask tmpTask = iterFuture.next();
            indexMap.put("F" + futureID, Integer.valueOf(tmpTask.getID()));
            tmpTask.setID("F" + futureID);
            futureID++;
            logger.info(tmpTask.getAsText() + ">>> Assign ID:" + tmpTask.getID());
        }
        while (iterCompleted.hasNext()) {
            ReadOnlyTask tmpTask = iterCompleted.next();
            indexMap.put("C" + completedID, Integer.valueOf(tmpTask.getID()));
            tmpTask.setID("C" + completedID);
            completedID++;
            logger.info(tmpTask.getAsText() + ">>> Assign ID:" + tmpTask.getID());
        }
    }

    // For debugging
    /**
     * Prints the mapping between absolute and relative index
     */
    public void printIndexMap(HashMap<String, Integer> map) {
        logger.info("=============indexmap content==============");
        for (String name : map.keySet()) {
            String key = name.toString();
            String value = map.get(name).toString();
            logger.info(key + " " + value);
        }
    }

    /**
     * Translate task ID to absolute index
     */
    @Override
    public int parseUIIndex(String uiIndex) {
        uiIndex = uiIndex.toUpperCase();
        assert isValidUIIndex(uiIndex);
        logger.info(">>>>>>>>>>>>query UI index:" + uiIndex);
        logger.info(">>>>>>>>>>>>Absolute index:" + (indexMap.get(uiIndex) + 1));
        assert uiIndex != null;
        assert indexMap.containsKey(uiIndex);
        // plus one since all current commands take index as 1-based
        return indexMap.get(uiIndex) + 1;
    }

    /**
     * gets UI index(task ID) by absolute index
     */
    @Override
    public String getUIIndex(int index) {
        return filteredTasks.get(index).getID();
    }

    @Override
    public boolean isValidUIIndex(String uiIndex) {
        uiIndex = uiIndex.toUpperCase();
        return indexMap.containsKey(uiIndex);
    }

```
###### /java/seedu/today/model/task/Task.java
``` java
    @Override
    public String getID() {
        return this.id;
    }

    @Override
    public void setID(String id) {
        this.id = id;
    }

    @Override
    public void setAnimation(int flag) {
        this.isAnimated = flag;
    }

    @Override
    public boolean isAnimated() {
        if (this.isAnimated == 0) {
            return false;
        }
        return true;
    }

    @Override
    public int getIsAnimated() {
        return this.isAnimated;
    }

```
